{"componentChunkName":"component---src-pages-markdown-remark-frontmatter-slug-tsx","path":"/blog/gasp-with-react/","result":{"data":{"markdownRemark":{"html":"<p>A quick example for how to use Greensock on demand animations with react hooks</p>\n<p>This is a brief tutorial on how to animate components on demand with Greensock and React hooks.</p>\n<p>We'll be using Create react app in this tutorial.</p>\n<p>To begin create a new app:</p>\n<deckgo-highlight-code language=\"bash\" terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">create-react-app gsap-with-hooks\ncd gsap-with-hooks</code>\n        </deckgo-highlight-code>\n<p>The only other dependency we will need for this tutorial is GSAP.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">yarn add gsap</code>\n        </deckgo-highlight-code>\n<p>Start the development server so that we can see our changes</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">yarn start</code>\n        </deckgo-highlight-code>\n<p>Since we will be adding our own animations here, remove the lines that animate the React Logo from <code>src/App.css</code></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">.App {\ntext-align: center;\n}\n\n.App-logo {\n/_ Comment out the line below _/\n/_ animation: App-logo-spin infinite 20s linear; _/\nheight: 40vmin;\npointer-events: none;\n}\n\n.App-header {\nbackground-color: #282c34;\nmin-height: 100vh;\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\njustify-content: center;\nfont-size: calc(10px + 2vmin);\ncolor: white;\n}\n\n.App-link {\ncolor: #61dafb;\n}\n/_ Commment out the code below _/\n/_ @keyframes App-logo-spin {\nfrom {\ntransform: rotate(0deg);\n}\nto {\ntransform: rotate(360deg);\n}\n} _/</code>\n        </deckgo-highlight-code>\n<p>Looking at the development server, the logo should no longer be spinning.</p>\n<p>Now we're going to add three buttons to our app that Pause, Play, and Reverse our animation. We're also going to turn the App component into a functional component.</p>\n<p>Your <code>App.js</code> should look similar to this after adding the buttons:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React from &quot;react&quot;;\nimport logo from &quot;./logo.svg&quot;;\nimport &quot;./App.css&quot;;\n\nconst App = () =&gt; {\n  return (\n    &lt;div className=&quot;App&quot;&gt;\n      &lt;header className=&quot;App-header&quot;&gt;\n        &lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt;\n        {/* Only this div and buttons have been added */}\n        &lt;div&gt;\n          &lt;button&gt;Play&lt;/button&gt;\n          &lt;button&gt;Pause&lt;/button&gt;\n          &lt;button&gt;Reverse&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;p&gt;\n          Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.\n        &lt;/p&gt;\n        &lt;a\n          className=&quot;App-link&quot;\n          href=&quot;https://reactjs.org&quot;\n          target=&quot;_blank&quot;\n          rel=&quot;noopener noreferrer&quot;\n        &gt;\n          Learn React\n        &lt;/a&gt;\n      &lt;/header&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default App;</code>\n        </deckgo-highlight-code>\n<p>Okay, now for the real work. In order to accomplish this correctly only using a functional component we will need to import useState, useRef, and useEffect from react.</p>\n<p>Replace the <code>import React from \"react\";</code> line with:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React, {useState, useRef, useEffect} from &quot;react&quot;;</code>\n        </deckgo-highlight-code>\n<p>The first thing we'll do is create a new ref and store the react img logo in it. This will ensure that this node is loaded on the DOM before we try to animate it with Greensock.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">// new\nimport React, { useState, useRef, useEffect } from &quot;react&quot;;\nimport logo from &quot;./logo.svg&quot;;\nimport &quot;./App.css&quot;;\n\nconst App = () =&gt; {\n  // new\n  let imgRef = useRef(null);\n\n  return (\n    &lt;div className=&quot;App&quot;&gt;\n      &lt;header className=&quot;App-header&quot;&gt;\n        &lt;img\n          src={logo}\n          className=&quot;App-logo&quot;\n          alt=&quot;logo&quot;\n          // new\n          ref={element =&gt; {\n            imgRef = element;\n          }}\n        /&gt;\n        &lt;div&gt;\n          &lt;button&gt;Play&lt;/button&gt;\n          &lt;button&gt;Pause&lt;/button&gt;\n          &lt;button&gt;Reverse&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;p&gt;\n          Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.\n        &lt;/p&gt;\n        &lt;a\n          className=&quot;App-link&quot;\n          href=&quot;https://reactjs.org&quot;\n          target=&quot;_blank&quot;\n          rel=&quot;noopener noreferrer&quot;\n        &gt;\n          Learn React\n        &lt;/a&gt;\n      &lt;/header&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default App;</code>\n        </deckgo-highlight-code>\n<p>The next thing we'll do is create a react state object to store our animation function in. This will ensure that we are always accessing the already existing animation function as opposed to creating a new one.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React, { useState, useRef, useEffect } from &quot;react&quot;;\nimport logo from &quot;./logo.svg&quot;;\nimport &quot;./App.css&quot;;\n\nconst App = () =&gt; {\n\n  let imgRef = useRef(null);\n\n  // New\n  const [animation, setAnimation] = useState();\n\n  return (\n    &lt;div className=&quot;App&quot;&gt;\n      &lt;header className=&quot;App-header&quot;&gt;\n        &lt;img\n          src={logo}\n          className=&quot;App-logo&quot;\n          alt=&quot;logo&quot;\n          ref={element =&gt; {\n            imgRef = element;\n          }}\n        /&gt;\n        &lt;div&gt;\n          &lt;button&gt;Play&lt;/button&gt;\n          &lt;button&gt;Pause&lt;/button&gt;\n          &lt;button&gt;Reverse&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;p&gt;\n          Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.\n        &lt;/p&gt;\n        &lt;a\n          className=&quot;App-link&quot;\n          href=&quot;https://reactjs.org&quot;\n          target=&quot;_blank&quot;\n          rel=&quot;noopener noreferrer&quot;\n        &gt;\n          Learn React\n        &lt;/a&gt;\n      &lt;/header&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default App;</code>\n        </deckgo-highlight-code>\n<p>Next we have to use the useEffect hook to make sure that the animation is only created once the DOM has been rendered. We will create our animation function here and store it in our state object.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React, { useState, useRef, useEffect } from &quot;react&quot;;\nimport { TweenMax } from &quot;gsap&quot;;\nimport logo from &quot;./logo.svg&quot;;\nimport &quot;./App.css&quot;;\n\nconst App = () =&gt; {\n\n  let imgRef = useRef(null);\n\n  const [animation, setAnimation] = useState(null);\n\n  // New\n  useEffect(() =&gt; {\n    setAnimation(\n      TweenMax.to(imgRef, 10, {\n        rotation: 360,\n        repeat: -1\n      }).pause()\n    );\n  }, []);\n\n  return (\n    &lt;div className=&quot;App&quot;&gt;\n      &lt;header className=&quot;App-header&quot;&gt;\n        &lt;img\n          src={logo}\n          className=&quot;App-logo&quot;\n          alt=&quot;logo&quot;\n          ref={element =&gt; {\n            imgRef = element;\n          }}\n        /&gt;\n        &lt;div&gt;\n          &lt;button&gt;Play&lt;/button&gt;\n          &lt;button&gt;Pause&lt;/button&gt;\n          &lt;button&gt;Reverse&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;p&gt;\n          Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.\n        &lt;/p&gt;\n        &lt;a\n          className=&quot;App-link&quot;\n          href=&quot;https://reactjs.org&quot;\n          target=&quot;_blank&quot;\n          rel=&quot;noopener noreferrer&quot;\n        &gt;\n          Learn React\n        &lt;/a&gt;\n      &lt;/header&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default App;</code>\n        </deckgo-highlight-code>\n<p>Since we don't want our animation to play as soon as it's loaded, we throw the <code>.pause()</code> method on the end of it. This will enable us to control when it starts rather than just starting on loading.</p>\n<p>The last thing to do is to wire up our buttons to do their jobs!</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React, { useState, useRef, useEffect } from &quot;react&quot;;\nimport { TweenMax } from &quot;gsap&quot;;\nimport logo from &quot;./logo.svg&quot;;\nimport &quot;./App.css&quot;;\n\nconst App = () =&gt; {\n  let imgRef = useRef(null);\n\n  const [animation, setAnimation] = useState(null);\n\n  useEffect(() =&gt; {\n    setAnimation(\n      TweenMax.to(imgRef, 10, {\n        rotation: 360,\n        repeat: -1\n      }).pause()\n    );\n  }, []);\n\n  return (\n    &lt;div className=&quot;App&quot;&gt;\n      &lt;header className=&quot;App-header&quot;&gt;\n        &lt;img\n          src={logo}\n          className=&quot;App-logo&quot;\n          alt=&quot;logo&quot;\n          ref={element =&gt; {\n            imgRef = element;\n          }}\n        /&gt;\n        &lt;div&gt;\n          // New - just add the onclick handlers!\n          &lt;button onClick={() =&gt; animation.play()}&gt;Play&lt;/button&gt;\n          &lt;button onClick={() =&gt; animation.pause()}&gt;Pause&lt;/button&gt;\n          &lt;button onClick={() =&gt; animation.reverse()}&gt;Reverse&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;p&gt;\n          Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.\n        &lt;/p&gt;\n        &lt;a\n          className=&quot;App-link&quot;\n          href=&quot;https://reactjs.org&quot;\n          target=&quot;_blank&quot;\n          rel=&quot;noopener noreferrer&quot;\n        &gt;\n          Learn React\n        &lt;/a&gt;\n      &lt;/header&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default App;</code>\n        </deckgo-highlight-code>\n<p>Note that the reverse method basically rewinds the animation, so it will only work if the animation has been running for a few seconds.</p>","frontmatter":{"date":"April 20, 2019","slug":"/blog/gasp-with-react","title":"Greensock Animations using React Hooks"}}},"pageContext":{"id":"33d7b821-9770-5a3a-8215-76d1a2fc7e34","frontmatter__slug":"/blog/gasp-with-react","__params":{"frontmatter__slug":"blog"}}},"staticQueryHashes":[]}