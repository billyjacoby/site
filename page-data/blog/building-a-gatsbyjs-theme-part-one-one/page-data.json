{"componentChunkName":"component---src-pages-markdown-remark-frontmatter-slug-tsx","path":"/blog/building-a-gatsbyjs-theme-part-one-one/","result":{"data":{"markdownRemark":{"html":"<h2>Setting up our theme development environment</h2>\n<p>Welcome to part one of the tutorial. If you don't know what Gatsby themes are, or why you would use them, you can refer to part one of this tutorial<a href=\"https://billyjacoby.dev/intro-to-gatsby-themes\">here.</a></p>\n<p>This tutorial is aimed for developers who either want to create themes to release to other users, or want to create themes that they could use across a number of their own projects.</p>\n<p>You can view the final code for this part of the tutorial on my github page here:</p>\n<p><a href=\"https://github.com/billyjacoby/gabsty-theme-tutorial/tree/part-one\">Gatsby Theme - Part One</a></p>\n<p>That being said, here are a few things that we will have to tackle in this part of the tutorial to get our dev environment for building themes up and running:</p>\n<ul>\n<li>Initialize an 'umbrella' NPM package to contain both our theme package, as well as our development site</li>\n<li>Initialize an NPM package that will contain all of our theme files and configurations</li>\n<li>Initialize an NPM package that will act as a user site consuming our theme</li>\n</ul>\n<p>Now bear with me, because when I first started building this theme this all seemed a little daunting, and repetitive to me.</p>\n<p>For development purposes we will be initially building the NPM packages as private. This is so that we can use <code>yarn</code>'s workspaces feature.</p>\n<h3>NPM Init (Thrice)</h3>\n<p>Okay so the first thing we'll do is make a directory that holds our entire theme development environment, and <code>cd</code> into the directory.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">mkdir gatsby-theme-tutorial-development\ncd gatsby-theme-tutorial-development</code>\n        </deckgo-highlight-code>\n<p>Once in this folder we'll run <code>npm init</code> for the first time. You don't need to worry about filling in the information that NPM asks you for just now. If you hit enter all the way through you should have a <code>package.json</code> file that looks like this:</p>\n<p>package.json</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">{\n  &quot;name&quot;: &quot;gatsby-theme-tutorial-development&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;main&quot;: &quot;index.js&quot;,\n  &quot;scripts&quot;: {\n    &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;\n  },\n  &quot;author&quot;: &quot;&quot;,\n  &quot;license&quot;: &quot;MIT&quot;\n}</code>\n        </deckgo-highlight-code>\n<p>Now we need to make two changes to this file in order configure and allow us to use yarn's workspaces feature. Add the following lines to the bottom of your <code>package.json</code> file:</p>\n<p>/gatsby-theme-tutorial-development/package.json</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">...\n&quot;private&quot;: true,\n&quot;workspaces&quot;: [\n    &quot;site&quot;,\n    &quot;packages/*&quot;\n  ]</code>\n        </deckgo-highlight-code>\n<p>After this is complete we need to add the mentioned directories in our <code>gatsby-theme-tutorial</code> folder.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">mkdir packages\nmkdir site</code>\n        </deckgo-highlight-code>\n<p>Now we <code>cd</code> into the <code>packages/</code> folder and create the directory for our theme</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">cd packages\nmkdir gatsby-theme-tutorial</code>\n        </deckgo-highlight-code>\n<p>Our folder structure will look like this so far:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">gatsby-theme-tutorial-development/\n--packages/\n  |--gatsby-theme-tutorial/\n--site/\n--package.json</code>\n        </deckgo-highlight-code>\n<p>Now run the <code>npm init</code> command again in the <code>gatsby-theme-tutorial</code> folder, as well as the <code>site</code> folder. We can just hit enter through all of the prompts and worry about filling the information in later. This will make our directory structure look like this:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">gatsby-theme-tutorial-development/\n--packages/\n  |--gatsby-theme-tutorial/\n    |--package.json\n--site/\n  |--package.json\n--package.json</code>\n        </deckgo-highlight-code>\n<p>Okay, now that all of that is out of the way we can begin installing the necessary dependencies for our theme. We'll be doing all of this from the main directory of our development environment, in this tutorial it will be <code>/gatsby-theme-tutorial-development</code>.</p>\n<p>From this directory add the necessary dependencies to our theme workspace for Gatsby.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">yarn workspace gatsby-theme-tutorial add -D gatsby react react-dom</code>\n        </deckgo-highlight-code>\n<p>You should see a <code>node_modules/</code> folder in your gatsby theme folder once this is complete.</p>\n<p>Now we need to copy our devDependencies to peerDependencies in the gatsby theme package.json file.</p>\n<p>The <code>package.json</code> file should look like this once this is complete:</p>\n<p>/gatsby-theme-tutorial-development/gatsby-theme-tutorial/package.json</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">{\n  &quot;name&quot;: &quot;gatsby-theme-tutorial&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;main&quot;: &quot;index.js&quot;,\n  &quot;scripts&quot;: {\n    &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;\n  },\n  &quot;author&quot;: &quot;&quot;,\n  &quot;license&quot;: &quot;MIT&quot;,\n  &quot;devDependencies&quot;: {\n    &quot;gatsby&quot;: &quot;^2.4.2&quot;,\n    &quot;react&quot;: &quot;^16.8.6&quot;,\n    &quot;react-dom&quot;: &quot;^16.8.6&quot;\n  },\n  &quot;peerDependencies&quot;: {\n    &quot;gatsby&quot;: &quot;^2.4.2&quot;,\n    &quot;react&quot;: &quot;^16.8.6&quot;,\n    &quot;react-dom&quot;: &quot;^16.8.6&quot;\n  }\n}</code>\n        </deckgo-highlight-code>\n<p>Next we need to add our theme package, and our gatsby scripts to our site's package.json file. We will add this like so:</p>\n<p>/gatsby-theme-tutorial-development/site/package.json</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">{\n  &quot;name&quot;: &quot;site&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;main&quot;: &quot;index.js&quot;,\n  &quot;scripts&quot;: {\n    /// NEW LINES\n    &quot;develop&quot;: &quot;gatsby develop&quot;,\n    &quot;build&quot;: &quot;gatsby build&quot;\n  },\n  &quot;author&quot;: &quot;&quot;,\n  &quot;license&quot;: &quot;MIT&quot;,\n  /// NEW LINES\n  &quot;dependencies&quot;: {\n    &quot;gatsby-theme-tutorial&quot;: &quot;*&quot;\n  }\n}</code>\n        </deckgo-highlight-code>\n<p>The last thing we should need to do here is add our Gatsby and React dependencies to our site workspace.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">yarn workspace site add gatsby react react-dom</code>\n        </deckgo-highlight-code>\n<p>The final <code>package.json</code> for our <code>site</code> directory should look like this now:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">{\n  &quot;name&quot;: &quot;site&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;main&quot;: &quot;index.js&quot;,\n  &quot;scripts&quot;: {\n    &quot;develop&quot;: &quot;gatsby develop&quot;,\n    &quot;build&quot;: &quot;gatsby build&quot;\n  },\n  &quot;author&quot;: &quot;&quot;,\n  &quot;license&quot;: &quot;MIT&quot;,\n  &quot;dependencies&quot;: {\n    &quot;gatsby&quot;: &quot;^2.4.2&quot;,\n    &quot;gatsby-theme-tutorial&quot;: &quot;*&quot;,\n    &quot;react&quot;: &quot;^16.8.6&quot;,\n    &quot;react-dom&quot;: &quot;^16.8.6&quot;\n  }\n}</code>\n        </deckgo-highlight-code>\n<p>Okay, take a deep breath and know that all of our boilerplate folder configuration is finally complete!</p>\n<p>Next we just have to configure our <code>gatsby-config.js</code> files in order to be ready to start building!</p>\n<p>We need to install <code>gatsby-plugin-page-creator</code> into our theme. To do this run the following command.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">yarn workspace gatsby-theme-tutorial add gatsby-plugin-page-creator</code>\n        </deckgo-highlight-code>\n<p>In our <code>gatsby-theme-tutorial</code> folder create a <code>gatsby-config.js</code> file that looks like this:</p>\n<p><code>gatsby-theme-tutorial/gatsby-config.js</code></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">module.exports = {\n  plugins: [\n    {\n      resolve: `gatsby-plugin-page-creator`,\n      options: {\n        path: `${__dirname}/src/pages`\n      }\n    }\n  ]\n};</code>\n        </deckgo-highlight-code>\n<p>We also need to add an <code>index.js</code> file into this folder so that our site recognizes this folder as an NPM package. This file doesn't need to contain anything except for a comment for now.</p>\n<p><code>gatsby-theme-tutorial/index.js</code></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">// no-op</code>\n        </deckgo-highlight-code>\n<p>And in out <code>site</code> folder we need to create a super simple config file that tells our site to use our new theme!</p>\n<p><code>site/gatsby-config.js</code></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">module.exports = {\n  __experimentalThemes: [&quot;gatsby-theme-tutorial&quot;]\n};</code>\n        </deckgo-highlight-code>\n<p>Now lets create a basic index page in our theme folder and see if everything is working as expected.</p>\n<p><code>gatsby-theme-tutorial/src/pages/index.js</code></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React from &#39;react&#39;;\n\nexport default () =&gt; (\n  &lt;h1&gt;Hello World!&lt;/h1&gt;\n);</code>\n        </deckgo-highlight-code>\n<p>Now to check our workâ€¦</p>\n<p>Run <code>yarn</code> one last time, from our <code>gatsby-theme-tutorial/</code> directory to make sure all of our packages are correctly installed.</p>\n<p>Then run <code>yarn workspace site develop</code> and you will hopefully see our index page in a web browser!</p>\n<h3>The Result</h3>\n<p>Now if you're anything like me, you're probably thinking something along the lines of \"Wow we needed to do all of that work just to setup an index page?\"</p>\n<p>The magic of Gatsby themes is that we can create all of our boilerplate pages and styles inside of our theme package, and any gatsby build that will be using this theme will have access to those files!</p>\n<p>Furthermore, if we need to update a component or some styles we can do so in our theme then push the update to NPM and any other project using that theme simply has to update our theme package in order to see those updates!</p>\n<p>If something isn't working as you would expect, remember that you can view all of the source code on the part-one branch on my Github repo for this project which can be found <a href=\"https://github.com/billyjacoby/gabsty-theme-tutorial/tree/part-one\">here.</a></p>\n<p>If you get stumped feel free to comment on this post, or message me on twitter!</p>\n<h3>What's next</h3>\n<p>In part two of this tutorial we will begin diving into how we can style the layout component of our theme, and see all of those changes propagate to our development site that is using our theme.</p>\n<p>It's going to get very interesting from here on out, so stay tuned and tweet at me or leave a comment if you get hung up on anything or have any questions!</p>\n<p><strong><em>You can view <a href=\"https://billyjacoby.dev/building-a-gatsbyjs-theme-part-two\">part two of the tutorial here</a></em></strong></p>","frontmatter":{"date":"May 12, 2019","slug":"/blog/building-a-gatsbyjs-theme-part-one-one","title":"Building a GatsbyJS Theme - Part One"}}},"pageContext":{"id":"0d4e10b8-ec1c-5aa9-977e-75df03d9003c","frontmatter__slug":"/blog/building-a-gatsbyjs-theme-part-one-one","__params":{"frontmatter__slug":"blog"}}},"staticQueryHashes":[]}