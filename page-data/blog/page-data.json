{"componentChunkName":"component---src-pages-blog-tsx","path":"/blog/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"60d863fa-d2f7-5794-85a7-38e37ed0523c","html":"<p>Recently I saw a few different posts on Reddit that showed how the OP had turned the dead space underneath their kitchen cabinets into a garage for their roomba. What I was unable to find was a tutorial on how to accomplish this for myself. </p>\n<p>Here is the final product (sped up about 300%):</p>\n<p><img src=\"http://billyjacoby.com/wp-content/uploads/2021/06/girStart-1.gif\" alt=\"\"></p>\n<p>Hey Siri, start the vacuum</p>\n<p>This is the quick rundown of how I built my own under cabinet storage for Gir, my robot vacuum cleaner. I've included the bill of materials (amazon associates links) necessary to complete the build. I plan on doing a more thorough write up with all the code and STL files included but for now, here is a quick overview of what I was able to accomplish.</p>\n<p>I began with modeling and 3D printng the parts that I though would be necessary in order to move the door up and down. This took quite a bit of trial and error, but  was simpler than I expected it to be.</p>\n<p>After the parts were complete it was time to program and assemble the electonic components. The parts I finally decided to use are:</p>\n<p>To keep things simple I decided to use a single more powerful stepper motor as opposed to one lower powered one on each side. I also tested a variety of different boards for controlling the stepper motor, and the easy driver was by far the simplest and most straight forward. </p>\n<p>After getting everything assembled it was time to program the ESP8266. The device will be communicating with my Homeassistant instance in order to know when to open and close the door. When the robot starts a job the door will open, and stay open until its finished. Once the cleaning job is finished the door will close. During the cleaning job, if the collection bin becomes full, the door will close in order to prevent the robot from docking itself so that it's easier for me to empty the bin.</p>\n<p>This was all achieved using a simple pub sub client library and utilizing the (mostly) built in mqtt functionality of home assistant.</p>\n<p>The final step was to remove the piece of wood from under the cabinet and re-attach it using hinges. I also opted to take about 1/8\" off from each side of the wood so that it would open and close easier. On most cabinets this piece of wood is fastened with just a couple brad nails and should come off fairly easily. Just give it a tug and you should feel it eventually loosen up and come off. The hinges for this design attached to the top of the door to allow it to open sort of like a traditional garage door.</p>\n<p>After the hinge was complete all that was left was to attach the components to the underside of the cabinet, and put Gir in his new home. The placement of the components took some trial and error, but it now opens and closes with about a 95% success rate.</p>\n<p>Thanks for reading, and if anyone has any questions anbout the build feel free to reach out to me @billyjacoby on Twitter!</p>","excerpt":"Recently I saw a few different posts on Reddit that showed how the OP had turned the dead space…","frontmatter":{"slug":"/blog/creating-a-garage-for-my-roomba","title":"Creating a Garage for my Roomba","date":"2020-11-27","featuredImage":{"childImageSharp":null}}}},{"node":{"id":"d78f89c0-54c9-5ecd-be48-fdb7d5532bdd","html":"<p>I generally store one VM for my most popular operating systems as a spun down clone on my Proxmox host. This makes it super simple for me to spin up a fresh VM in case I want to try something new, or if i need to isolate and troubleshoot a problem I've been having on a different guest.</p>\n<p>For this quick tutorial I'll be cloning a version of Ubuntu that I already has stored as a clone on my host machine.</p>\n<p>There are a few different things that I always like to do immediately after cloning a VM.</p>\n<ul>\n<li>Change the options for the VM</li>\n<li>Change the hostname</li>\n<li>Change the IP address</li>\n<li>Expand the disk</li>\n</ul>\n<h2>Change VM Options</h2>\n<p>The first thing we have to do is actually clone the VM and decide on a few options.</p>\n<p>From the stored VM clone click the 'More' option at the top right of the summary screen, then select 'Clone'.</p>\n<p>Follow the prompt to select options and continue. I usually clone each VM as a full clone, rather than linking them. To be honest, I'm not too sure what a 'Linked Clone' is, or how it would be useful.</p>\n<p>After this is done choose what hardware options you'd like your machine to have. In the sidebar on the right select the 'Hardware' option. Select how much RAM you'd like to allocate, and increase the disk size if you'd like. Note that you can only increase the disk size and not decrease it, plus this will take a bit more work to accomplish.</p>\n<p>Now that we've got all of our options configured go ahead and start the machine, then head to the 'Console' tab to begin updating our info.</p>\n<h2>Change Hostname:</h2>\n<p>The first thing that we'll change is the hostname for the machine.</p>\n<p>After you login to your shell you, you can display the current hostname, by entering this command:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">hostnamectl</code>\n        </deckgo-highlight-code>\n<p>The info about the machine will be displayed:<img src=\"https://billyjacoby.com/content/images/2020/05/hostnamectl.png\" alt=\"\"></p>\n<p>As of Ubuntu 18.04 we can change the hostname using the same command with some flags.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">sudo hostnamectl set-hostname newHostName</code>\n        </deckgo-highlight-code>\n<p>Running the <code>hostnamectl</code> command again after this will show us our new host name.<img src=\"https://billyjacoby.com/content/images/2020/05/new-hostnamectl.png\" alt=\"\"></p>\n<p>After this we still need to edit the hosts file. This is located at <code>/etc/hosts</code>.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">sudo vim /etc/hosts</code>\n        </deckgo-highlight-code>\n<p>Remove the old hostname, and replace it with your new desired one.<img src=\"https://billyjacoby.com/content/images/2020/05/hosts-file.png\" alt=\"\"></p>\n<p>Next we need to edit the cloud.cfg file if it exists. This is a file that belong to the cloud-init package which makes managing cloud instances of images simpler.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">sudo vim /etc/cloud-init/cloud.cfg</code>\n        </deckgo-highlight-code>\n<p>Here we will find the line that says <code>preserver_hostname</code> and change it from <code>false</code> to <code>true</code>.</p>\n<h2>Change IP Address:</h2>\n<p>Please make sure that you are connected to your VM via the console in the Proxmox Web GUI, otherwise you will lose the connection to the VM.</p>\n<p>I always statically assign my VMs their IP address in order to avoid any conflict. I also have a range of IPs on my LAN that I use to make this easier as well.</p>\n<p>This makes it easier to know how to access the VM when I am first configuring it. If you don't have a specific range of IPs dedicated to your VMs I would certainly recommend making this IP static on the router itself after initial setup though.</p>\n<p>For now we will change the IP using netplan.</p>\n<p>Your mileage my vary, but I can always find my netplan configs here:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">sudo vim /etc/netplan/50-cloud-init.yaml</code>\n        </deckgo-highlight-code>\n<p>All we've got to do is edit this file to reflect the changes that we'd like to see.<img src=\"https://billyjacoby.com/content/images/2020/05/netplan.png\" alt=\"\"></p>\n<p>Then edit the address from whatever it is (192.168.1.20 in my case) to what you'd like it to be.</p>\n<p>Then generate and apply the config</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">sudo netplan generate\nsudo netplan apply</code>\n        </deckgo-highlight-code>\n<p>Now running <code>ifconfig</code> will show you the new IP address you've assigned!</p>\n<h2>Expand the Disk</h2>\n<p>Now the last step is to expand the hard disk to use all available space. This is a more lengthy process, and as such I will cover it in another blog post. This can be found <a href=\"https://billyjacoby.com/how-to-expand-the-disk-on-a-ubuntu-vm/\">here.</a></p>\n<p>Feel free to enter your email address below to get notified when new posts come out. Thanks for reading!</p>","excerpt":"I generally store one VM for my most popular operating systems as a spun down clone on my Proxmox…","frontmatter":{"slug":"/blog/clone-vm-proxmox","title":"How to clone a VM in Proxmox","date":"2020-05-27","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBP/EABYBAQEBAAAAAAAAAAAAAAAAAAQCA//aAAwDAQACEAMQAAAB2ChUciLSf//EABoQAAMAAwEAAAAAAAAAAAAAAAECEQADEwT/2gAIAQEAAQUC6wN6De7Yig4dSRhD/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERIf/aAAgBAwEBPwGpa//EABcRAAMBAAAAAAAAAAAAAAAAAAABEQL/2gAIAQIBAT8BuURH/8QAGxAAAQQDAAAAAAAAAAAAAAAAAAEQITIxQZH/2gAIAQEABj8Cr0whokq3/8QAGRABAQEBAQEAAAAAAAAAAAAAAREA4WGB/9oACAEBAAE/IUVFfUwYM157iLT91Zi4lDf/2gAMAwEAAgADAAAAEJcP/8QAFxEBAAMAAAAAAAAAAAAAAAAAAQARIf/aAAgBAwEBPxBYxjTLn//EABcRAQEBAQAAAAAAAAAAAAAAAAEAEUH/2gAIAQIBAT8Q0YkLy//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESFRMdFhccH/2gAIAQEAAT8QP7MiO4EzZza/YrvD0IPgg4tdyiS2FGWEgeWf/9k=","aspectRatio":1.7699115044247788,"src":"/static/0c1e1158eb83c47302ee89e349fbf99b/be86c/clone-vm-proxmox.jpg","srcSet":"/static/0c1e1158eb83c47302ee89e349fbf99b/d59a3/clone-vm-proxmox.jpg 200w,\n/static/0c1e1158eb83c47302ee89e349fbf99b/deb97/clone-vm-proxmox.jpg 400w,\n/static/0c1e1158eb83c47302ee89e349fbf99b/be86c/clone-vm-proxmox.jpg 800w,\n/static/0c1e1158eb83c47302ee89e349fbf99b/cb254/clone-vm-proxmox.jpg 1200w,\n/static/0c1e1158eb83c47302ee89e349fbf99b/ec36a/clone-vm-proxmox.jpg 1600w,\n/static/0c1e1158eb83c47302ee89e349fbf99b/a7933/clone-vm-proxmox.jpg 2000w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},{"node":{"id":"1d1359be-c77f-543c-9e05-d9cd424f6c9f","html":"<p>I assure you, this blog post is more for me than it is for you. I can't begin to explain how many different times I have had to expand the disk space of a VM on my Proxmox host, and struggled far too long on Google to get the answer.</p>\n<p>Sure, there's some different packages that you could install from the normal Ubuntu repositories to make this a super simple and almost thoughtless process, but what if your disk is completely full and that isn't an option?</p>\n<p>The following is a quick and painless step by step guide to expand the disk on your Ubuntu virtual machine. This should be especially useful if you, for example, ran out of disk space and can't install any more packages.</p>\n<p>We'll assume that you have already added the disk space to your VM on your host machine and that you've already rebooted your VM.</p>\n<h2>Parted</h2>\n<p>Parted is a command line utility that comes pre installed on Ubuntu 18.04. Parted can view and edit the partitions on your disk. We'll be using it to reorganize our disk space so that Ubuntu can see the newly added space on our disk.</p>\n<p>For our purposes, parted must be run with the <code>sudo</code> command</p>\n<p>This command will open the program:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">sudo parted</code>\n        </deckgo-highlight-code>\n<p>Executing the print command will show all partitions of the disk:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">print all</code>\n        </deckgo-highlight-code>\n<p>As soon as you type this command you will be greeted with a message that shows that we have unused disk space, perfect!</p>\n<p><img src=\"https://billyjacoby.com/content/images/2020/05/parted-fix.png\" alt=\"\"></p>\n<p>Enter <code>F</code> or <code>Fix</code> to allow parted to fix the partition on the disk:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">Fix</code>\n        </deckgo-highlight-code>\n<p>This is all we will need to do in parted. Enter <code>q</code> to exit the utility.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">q</code>\n        </deckgo-highlight-code>\n<h2>Fdisk</h2>\n<p>Next we will be using <code>fdisk</code> to actually expand the new space to fill the rest of the drive.</p>\n<p>Replace the \"sda\" in the following command with wherever your disk is mounted:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">sudo fdisk /dev/sda</code>\n        </deckgo-highlight-code>\n<p>The <code>p</code> command prints the current partition table:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">p</code>\n        </deckgo-highlight-code>\n<p>Now type <code>d</code> to delete your existing partition - as scary as it sounds this is just so that it can be replaced with a larger partition that's the size of the whole disk. It will also ask which partition to delete. Make sure that the one you are selecting is correct.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">d</code>\n        </deckgo-highlight-code>\n<p>The <code>n</code> command will create a new partition that, in our case, will include all the existing space on the disk. It will ask you a series of questions including what number the disk should be labeled, and the first and last sectors on the disk. I have always just selected the defaults here.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">n</code>\n        </deckgo-highlight-code>\n<p>Next you may be asked if you want to remove the signature on the drive. In my case, this means that there was already an ext4 formatted filesystem on this partition of the disk. I always choose to remove the previous signature here, but for some reason you may not want to.</p>\n<p><img src=\"https://billyjacoby.com/content/images/2020/05/fdisk-n.png\" alt=\"\"></p>\n<p>The final step is to write the partition to our disk. After you ensure that you've selected all the correct options type the <code>w</code> command to write the new partition!</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">w</code>\n        </deckgo-highlight-code>\n<h2>Resize2fs</h2>\n<p>And the final step in this process is to use the <code>resize2fs</code> utility to resize the filesystem so that it utilizes all of the space available on it.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">sudo resize2fs /dev/sda2</code>\n        </deckgo-highlight-code>\n<p><img src=\"https://billyjacoby.com/content/images/2020/05/resize2fs.png\" alt=\"resize2fs\"></p>\n<p>After you've done this you can log out and back in to your machine to see that the percentage of used disk space has decreased!</p>\n<p>Thanks for reading!</p>","excerpt":"I assure you, this blog post is more for me than it is for you. I can't begin to explain how many…","frontmatter":{"slug":"/blog/how-to-expand-the-disk-on-a-ubuntu-vm","title":"How to expand the disk on a Ubuntu VM","date":"2020-05-20","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAG9DZDUFif/xAAcEAABBQADAAAAAAAAAAAAAAABAAIDERIEEzH/2gAIAQEAAQUCldld1H1SjbG8dCgP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAgIDAQAAAAAAAAAAAAAAABEBAhAxQSL/2gAIAQEABj8C2n07bCjZ6tMiP//EABsQAQEBAAIDAAAAAAAAAAAAAAERACExQXGR/9oACAEBAAE/IVIHpLzhnULzx4xAI0dfSdh1PmXIQ6CG/9oADAMBAAIAAwAAABDLP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQADAAEFAAAAAAAAAAAAAAEAETFxIUFhkaH/2gAIAQEAAT8QOCAhgsP0uEqSg2U3m+BPMQGBYmJGqWRRiSl050oPUJ+jAdgn/9k=","aspectRatio":1.3333333333333333,"src":"/static/71d842a1c3686590c73dca39577bfa3c/be86c/ubuntu-vm.jpg","srcSet":"/static/71d842a1c3686590c73dca39577bfa3c/d59a3/ubuntu-vm.jpg 200w,\n/static/71d842a1c3686590c73dca39577bfa3c/deb97/ubuntu-vm.jpg 400w,\n/static/71d842a1c3686590c73dca39577bfa3c/be86c/ubuntu-vm.jpg 800w,\n/static/71d842a1c3686590c73dca39577bfa3c/cb254/ubuntu-vm.jpg 1200w,\n/static/71d842a1c3686590c73dca39577bfa3c/ec36a/ubuntu-vm.jpg 1600w,\n/static/71d842a1c3686590c73dca39577bfa3c/a7933/ubuntu-vm.jpg 2000w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},{"node":{"id":"7ab1233a-7d4d-5721-97f9-381a32acd1f3","html":"<p>I've heard all about the Canvas API and, admittedly, have even used it multiple times without knowing exactly how it works or the full potential of it. The intention of this post is to help understand the best use cases for this API.</p>\n<p>So let's start with the basic definition.</p>\n<h2>What is the Canvas API?</h2>\n<p>In the shortest way possible the Canvas API is defined by MDN as the following:</p>\n<blockquote>\n<p>The Canvas API provides a means for drawing graphics via JavaScript and the HTML <code>&#x3C;canvas></code> element.</p>\n</blockquote>\n<p>At face value this means that the Canvas API has to consist of at least two parts. The space (read: canvas) in which our graphics will be drawn, and the means by which to draw them. So all the HTML really does here is provide a space for the JavaScript to actually draw the graphics.</p>\n<h2>Why is there a specific canvas element?</h2>\n<p>The canvas element is similar to the <code>&#x3C;img></code> element except it doesn't have any <code>src</code> or <code>alt</code> attributes. The only attributes that the canvas must have are width and height, however it can also be sized using CSS. Providing a fallback element is super simple, just place the element inside the <code>&#x3C;canvas></code> tag in order to do so.</p>\n<p>Using the specific <code>&#x3C;canvas></code> tag ensures that only browsers capable of using the API are doing so, and also provides us a way to provide fallback content.</p>\n<h2>What are the best use cases for the Canvas API?</h2>\n<p>The Canvas API has a vast variety of use cases, many of which I would have never thought of. Rather than just thinking of Canvas as a way to draw static 2 dimensional shapes, it can also be used to create animations, build graphic design editors, visualizations, and much more.</p>\n<p>The easiest way to learn more about this API is to start messing around with it!</p>\n<h2>How do I use the Canvas API?</h2>\n<p>For a full tutorial on how to use the Canvas API, head on over to <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial\">MDN's Canvas Tutorial</a> to get started.</p>\n<p>Basically you need to create a canvas element (with a fallback):</p>\n<h3>index.html</h3>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">...\n&lt;canvas id=&quot;my-canvas&quot; width=&quot;200&quot; height=&quot;200&quot;&gt;\n    This is your fallback content.\n&lt;/canvas&gt;\n...</code>\n        </deckgo-highlight-code>\n<p>Then you need to grab your canvas element in your JavaScript code, and access the drawing context:</p>\n<h3>index.js</h3>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">...\nvar canvas = document.getElementById(&#39;my-canvas&#39;);\nvar ctx = canvas.getContext(&#39;2d&#39;);\n...</code>\n        </deckgo-highlight-code>\n<p>And after that you can begin drawing! Note that canvas only support rectangles and paths. A rectangle is… well a rectangle, and a path is a list of points connected by lines. Every other shape you can imagine can be created using these two primitives, but these are the only two that are \"built in\".</p>\n<h2>Tutorial with code?</h2>\n<p>If there's any interest in a more in depth tutorial on this topic, please leave a comment or yell at me on twitter and I'll post one soon.</p>\n<p>Thanks for reading!</p>","excerpt":"I've heard all about the Canvas API and, admittedly, have even used it multiple times without…","frontmatter":{"slug":"/blog/what-is-html-canvas","title":"What is HTML Canvas?","date":"2020-03-04","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAEDBAUC/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgAB/9oADAMBAAIQAxAAAAHYVKc7GZpiQrpWedFf/8QAHBABAAICAwEAAAAAAAAAAAAAAgEDABIREyEi/9oACAEBAAEFAuw7b4piZlxFzcGLL52bKa9zjjKQU+s5b8v/xAAWEQADAAAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8BdP/EABcRAAMBAAAAAAAAAAAAAAAAAAABEBL/2gAIAQIBAT8BuWf/xAAcEAADAAIDAQAAAAAAAAAAAAAAAREQMSEiQZH/2gAIAQEABj8ClK8NHJ10WK5dWj36RH//xAAbEAADAAMBAQAAAAAAAAAAAAAAAREhQVExYf/aAAgBAQABPyFt3EcDWIVC4Iilhlawi6CiWcLxa1v1GoyTrxkV7OB8hD//2gAMAwEAAgADAAAAECzkDP/EABgRAQEBAQEAAAAAAAAAAAAAAAEAESFB/9oACAEDAQE/EEc5Glr4Wb//xAAZEQEAAgMAAAAAAAAAAAAAAAABABEQQVH/2gAIAQIBAT8QE3LGV1wf/8QAHBABAAMBAAMBAAAAAAAAAAAAAQARITFBUXGR/9oACAEBAAE/EBgveIDjKaotz1nZoA0ehUxwwpS1ds+Z+xiSl5KQUBSFzQshYfhEGB8gmmdlAAKgNUQ0N9wLs5QUgSjiFSDs/9k=","aspectRatio":0.6666666666666666,"src":"/static/a4e4af341f63aacc382e5c303337ff69/be86c/html-canvas.jpg","srcSet":"/static/a4e4af341f63aacc382e5c303337ff69/d59a3/html-canvas.jpg 200w,\n/static/a4e4af341f63aacc382e5c303337ff69/deb97/html-canvas.jpg 400w,\n/static/a4e4af341f63aacc382e5c303337ff69/be86c/html-canvas.jpg 800w,\n/static/a4e4af341f63aacc382e5c303337ff69/cb254/html-canvas.jpg 1200w,\n/static/a4e4af341f63aacc382e5c303337ff69/ec36a/html-canvas.jpg 1600w,\n/static/a4e4af341f63aacc382e5c303337ff69/c5c34/html-canvas.jpg 1707w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},{"node":{"id":"63abb3de-183e-5a08-96c8-cff5bdd92f21","html":"<h2>Making our existing theme composable</h2>\n<p>This is part three in a multi-part tutorial series on building your own Gatsby theme from scratch.</p>\n<p>Please checkout the <a href=\"https://billyjacoby.dev/intro-to-gatsby-themes\">Introduction</a>, <a href=\"https://billyjacoby.dev/building-a-gatsbyjs-theme-part-one\">Part One</a>, and <a href=\"https://billyjacoby.dev/building-a-gatsbyjs-theme-part-two\">Part Two</a> of this series if you haven't yet, as we will be picking up right where we left off at the end of part Two.</p>\n<p>The finished code for this portion of the tutorial can be found on my github repo <a href=\"https://github.com/billyjacoby/gabsty-theme-tutorial/tree/part-three\">here.</a></p>\n<p>The end goal of this tutorial is to break down some common website functions into their own respective themes in order to allow us to use them as <em>basically</em> their own components. That means that we need to make sure that each component plays nicely with each other. We'll have to change a few things in our theme to do this.</p>\n<p>Here's what we'll be tackling in this part of the tutorial:</p>\n<ul>\n<li>Change existing theme name</li>\n<li>Update our project's dependencies</li>\n<li>Add the ability to take options into our theme</li>\n<li>Pass options in to our theme</li>\n<li>Export components from our theme to be used in our site</li>\n</ul>\n<h3>Change existing theme name</h3>\n<p>The theme we have been working on this far we have named <code>gatsby-theme-tutorial</code>. the first thing that we'll do here is change this name to reflect the goal of this theme. We'll change this directory name to <code>gatsby-theme-style</code> for now. After doing this our folder structure will look like this:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">gatsby-theme-tutorial-development/\n--packages/\n  |--gatsby-theme-style/\n    |--package.json\n    ...\n--site/\n  |--package.json\n--package.json</code>\n        </deckgo-highlight-code>\n<p>We'll also need to update our <code>packages/gatsby-theme-style/package.json</code> and <code>site/package.json</code> file to change the name of our theme from <code>gatsby-theme-tutorial</code> to <code>gatsby-theme-style</code>.</p>\n<p>We're also going to move the <code>index.js</code> file from our theme's pages folder into our site's pages folder.</p>\n<p>Before we can continue with this build and run our development site again, we have to do a few other things.</p>\n<h3>Update our dependencies</h3>\n<p>Next, we will need to update out gatsby-config.js in our site directory, but before we do this lets go ahead and update all of our packages by running <code>yarn upgrade</code> in our root project directory.</p>\n<p>We're doing this mainly because it's been a while since we've done any work on this tutorial and we want to be sure we're using the most up to date packages.</p>\n<p>After everything has been updated, lets import our theme as a plugin rather than using the <code>__experimental</code> tag that we've been using.</p>\n<h4>site/gatsby-config.js</h4>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">module.exports = {\n  siteMetadata: {\n    title: `New Gatsby Site`,\n    description: `A website using our Gatsby theme!`,\n  },\n  plugins: [\n    {\n      resolve: &quot;gatsby-theme-style&quot;,\n      options: {\n        // blank for now, but we;ll be coming back to this\n      },\n    },\n  ],\n}</code>\n        </deckgo-highlight-code>\n<p>Now if we run <code>yarn workspace site develop</code> you should see that our site works the exact same way that it did at the end of our last tutorial. Now about that empty options object…</p>\n<h3>Passing options into our theme</h3>\n<p>We can pass any number of options to our theme using the options object from the <code>gatsby-config.js</code> of our site. This can be anything from color schemes, to navigation items, and much more. We're going to start by passing an option that tells our theme if we would like our <code>Layout</code> component to continue to wrap the root element - what it's currently doing.</p>\n<h4>site/gatsby-config.js</h4>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">module.exports = {\n  siteMetadata: {\n    title: `New Gatsby Site`,\n    description: `A website using our Gatsby theme!`,\n  },\n  plugins: [\n    {\n      resolve: &quot;gatsby-theme-style&quot;,\n      options: {\n        wrapRootElement: false,\n      },\n    },\n  ],\n}</code>\n        </deckgo-highlight-code>\n<p>Now in order to be able to access this options object in our theme we must make a change to our theme's <code>gatbsy-config.js</code></p>\n<h4>packages/gatsby-theme-style/gatsby-config.js</h4>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">module.exports = themeOptions =&gt; ({\n  siteMetadata: {\n    title: `Gatsby Theme Tutorial`,\n    description: `A tutorial for building a GatsbyJS theme from scratch!`,\n  },\n  plugins: [\n    {\n      resolve: `gatsby-plugin-page-creator`,\n      options: {\n        path: `${__dirname}/src/pages`,\n      },\n    },\n  ],\n})</code>\n        </deckgo-highlight-code>\n<p>This will enable us to access the <code>themeOptions</code> object just about anywhere in our theme to make decisions based on the options passed in. Now lets utilize this object in both our <code>packages/gatsby-theme-style/gatsby-browser.js</code> and <code>packages/gatsby-theme-style/gatsby-ssr.js</code> files to determine whether or not we should wrap our root element in our theme's styles or not.</p>\n<h4>packages/gatsby-theme-style/gatsby-browser.js</h4>\n<p>AND</p>\n<h4>packages/gatsby-theme-style/gatsby-ssr.js</h4>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React from &quot;react&quot;\nimport Layout from &quot;./src/components/layout&quot;\n\nexport const wrapPageElement = ({ element, props }, themeOptions) =&gt; {\n  // props provide same data to Layout as Page element will get\n  // including location, data, etc - you don&#39;t need to pass it\n  if (themeOptions.wrapRootElement) {\n    return &lt;Layout {...props}&gt;{element}&lt;/Layout&gt;\n  } else {\n    return\n  }\n}</code>\n        </deckgo-highlight-code>\n<p>After we make this change we see that our website no longer has any styles applied! Now if we toggle the <code>wrapRootElement</code> option to true in our <code>site/gatsby-config.js</code> file, we'll see all of our styles get applied again.</p>\n<p><strong><em>Note that you may have to stop and restart your development server for this to take effect</em></strong></p>\n<p>Before we do anything else lets add a quick navbar component to our theme so that we can change between pages.</p>\n<h4>packages/gatsby-theme-style/src/components/navbar.js</h4>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React from &quot;react&quot;\nimport { Link } from &quot;gatsby&quot;\n\nimport &quot;../styles/navbar.css&quot;\n\nconst Navbar = () =&gt; {\n  return (\n    &lt;nav&gt;\n      &lt;ul&gt;\n        &lt;li&gt;\n          &lt;Link to=&quot;/&quot;&gt;Home&lt;/Link&gt;\n        &lt;/li&gt;\n      &lt;/ul&gt;\n    &lt;/nav&gt;\n  )\n}\n\nexport default Navbar</code>\n        </deckgo-highlight-code>\n<h4>packages/gatsby-theme-style/src/style/navbar.css</h4>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">ul {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n  background-color: #333;\n}\n\nli {\n  float: left;\n}\n\nli a {\n  display: block;\n  color: white;\n  text-align: center;\n  padding: 14px 16px;\n  text-decoration: none;\n}\n\nli a:hover {\n  background-color: #111;\n}</code>\n        </deckgo-highlight-code>\n<p>Then lets make a few changes to our <code>Header.css</code> and add the component to our header as well.</p>\n<h4>packages/gatsby-theme-style/src/style/header.css</h4>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">.header {\n  margin: -8px;\n  // CHANGED\n  padding: 1.5rem 0 0 0;\n  // DELETED WIDTH PROPERTY\n  align-self: center;\n  text-align: center;\n  background-color: purple;\n  font-family: Arial, Helvetica, sans-serif;\n  border-bottom: solid black;\n}\n...</code>\n        </deckgo-highlight-code>\n<h4>packages/gatsby-theme-style/src/components/header.js</h4>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React from &quot;react&quot;\nimport { useStaticQuery, graphql, Link } from &quot;gatsby&quot;\nimport Navbar from &quot;./navbar&quot;\n\nimport &quot;../styles/header.css&quot;\n\nconst Header = () =&gt; {\n  const data = useStaticQuery(graphql`\n    query {\n      site {\n        siteMetadata {\n          title\n          description\n        }\n      }\n    }\n  `)\n\n  return (\n    &lt;div className=&quot;header&quot;&gt;\n      &lt;Link to=&quot;/&quot; className=&quot;no-style&quot;&gt;\n        &lt;h1 className=&quot;site-heading&quot;&gt;{data.site.siteMetadata.title}&lt;/h1&gt;\n        &lt;h4&gt;{data.site.siteMetadata.description}&lt;/h4&gt;\n      &lt;/Link&gt;\n      &lt;Navbar /&gt;\n    &lt;/div&gt;\n  )\n}\n\nexport default Header</code>\n        </deckgo-highlight-code>\n<p>Now when we go to our home page we see the navbar with a link to the home page. This is where things can get a little more complicated.</p>\n<p>We have more than just the home page in our site's pages directory, but how do we tell our theme to add those to the navbar? One way to do this is to update the options object with all of our page info.</p>\n<h3>Pass options in to our theme</h3>\n<p>Lets add a <code>navigationPages</code> object to our options object that will be passed in to our theme.</p>\n<h4>site/gatsby-config.js</h4>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">...\n  plugins: [\n    {\n      resolve: &quot;gatsby-theme-style&quot;,\n      options: {\n        wrapRootElement: true,\n        // NEW OBJECT\n        navigationPages: [\n          {\n            name: &quot;About&quot;,\n            title: &quot;About Us Page&quot;,\n            path: &quot;/about&quot;\n          }\n        ]\n      }\n    }\n  ]\n...</code>\n        </deckgo-highlight-code>\n<p>Now in our theme, lets make this object accessible to our siteMetadata object.</p>\n<h4>packages/gatsby-theme-style/gatsby-config.js</h4>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">module.exports = themeOptions =&gt; ({\n  siteMetadata: {\n    title: `Gatsby Theme Tutorial`,\n    description: `A tutorial for building a GatsbyJS theme from scratch!`,\n    // NEW\n    navigationPages: themeOptions.navigationPages\n      ? [...themeOptions.navigationPages]\n      : &quot;null&quot;,\n  },\n  plugins: [\n    {\n      resolve: `gatsby-plugin-page-creator`,\n      options: {\n        path: `${__dirname}/src/pages`,\n      },\n    },\n  ],\n})</code>\n        </deckgo-highlight-code>\n<p>I'm not sure if there is a better way, but in order to allow the graphql query to fail silently we need to use a ternary operator here in order to check if this option was passed into our theme. This way if a user does not pass additional pages in to our theme package we can still query the rest of the siteMetadata without getting an error from graphql.</p>\n<p>Lets update the static query in our header component, and then pass that data down to our navbar component.</p>\n<h4>packages/gatsby-theme-style/src/components/header.js</h4>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">...\n  const data = useStaticQuery(graphql`\n    query {\n      site {\n        siteMetadata {\n          title\n          description\n          navigationPages {\n            name\n            title\n            path\n          }\n        }\n      }\n    }\n  `);\n\n  return (\n    &lt;div className=&quot;header&quot;&gt;\n      &lt;Link to=&quot;/&quot; className=&quot;no-style&quot;&gt;\n        &lt;h1 className=&quot;site-heading&quot;&gt;{data.site.siteMetadata.title}&lt;/h1&gt;\n        &lt;h4&gt;{data.site.siteMetadata.description}&lt;/h4&gt;\n      &lt;/Link&gt;\n      &lt;Navbar navigationPages={data.site.siteMetadata.navigationPages} /&gt;\n    &lt;/div&gt;\n  );\n};\n...</code>\n        </deckgo-highlight-code>\n<p>And finally lets access this new data in our navbar component and add the page to our navbar!</p>\n<h4>packages/gatsby-theme-style/components/navbar.js</h4>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">...\n    &lt;nav&gt;\n      &lt;ul&gt;\n        &lt;li&gt;\n          &lt;Link to=&quot;/&quot;&gt;Home&lt;/Link&gt;\n        &lt;/li&gt;\n        {navigationPages.map((item, index) =&gt; (\n          &lt;li key={index}&gt;\n            &lt;Link to={item.path}&gt;{item.name}&lt;/Link&gt;\n          &lt;/li&gt;\n        ))}\n      &lt;/ul&gt;\n    &lt;/nav&gt;\n...</code>\n        </deckgo-highlight-code>\n<p>Now we can navigate between all of the pages in our site's directory from our theme's navbar component!</p>\n<p>This all works great if we want every page of our site to be styled by our theme, but what if we don't? How would we use the theme's style only on specific pages?</p>\n<h3>Export components from our theme to be used in our site</h3>\n<p>In order to choose to use specific components from our theme, we need to export those components from our theme package. This is done simply from inside our package's <code>index.js</code> file.</p>\n<p>Currently the only line of code in this file is a comment that reads <code>//no-op</code>. All we have to do to allow our site to import components from our theme is add some export statements to this file.</p>\n<h4>packages/gatsby-theme-style/index.js</h4>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">export { default as Layout } from &quot;./src/components/layout&quot;\nexport { default as Header } from &quot;./src/components/header&quot;\nexport { default as Navbar } from &quot;./src/components/navbar&quot;</code>\n        </deckgo-highlight-code>\n<p>Now lets change the wrapRootElement option in out <code>site/gatsby-config.js</code> file to false so that we can selectively choose which page will be styled with out Layout component.</p>\n<h4>site/gatsby-config.js</h4>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">...\n      wrapRootElement: false,\n...</code>\n        </deckgo-highlight-code>\n<p>After restarting our development server we will see that our theme's styles are no longer applied to any of our site's pages. Lets manually apply them to our index page.</p>\n<h4>site/src/pages/index.js</h4>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React from &quot;react&quot;\nimport { Layout } from &quot;gatsby-theme-style&quot;\n\nexport default () =&gt; (\n  &lt;Layout&gt;\n    &lt;h1&gt;Hello World!&lt;/h1&gt;\n  &lt;/Layout&gt;\n)</code>\n        </deckgo-highlight-code>\n<p>Just like that all of the components from our theme are now importable and able to be used by any site that is using them!</p>\n<h3>Wrapping Up</h3>\n<p>So in this part of the tutorial we changed and updated some things on our existing theme to enable our theme to play nicely with other themes that might be composed together to make up a website.</p>\n<p>One of the things that makes Gatsby themes so appealing is the ability to compose multiple themes together. Breaking down website functionality into separate themes will allow us, as developers, to simply require a gatsby theme to add all of the functionality of a blog, or a store, or just about anything you can think of.</p>\n<p>I'm already using a lot of these features on a regular basis, and I can say for certain that it has drastically improved my development workflow.</p>\n<p>Thanks for reading!</p>","excerpt":"Making our existing theme composable This is part three in a multi-part tutorial series on building…","frontmatter":{"slug":"/blog/building-a-gatsbyjs-theme-part-three","title":"Building a GatsbyJS Theme - Part Three","date":"2019-11-21","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHKVUWhMj//xAAcEAABAwUAAAAAAAAAAAAAAAABAAIRAxASEzH/2gAIAQEAAQUC6zXKfTxJMAG3/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8BR//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAARARAxof/aAAgBAQAGPwKGN8NvT//EABsQAQACAgMAAAAAAAAAAAAAAAEAERBRITFB/9oACAEBAAE/IStMYVQFni+ohmmotst9TP/aAAwDAQACAAMAAAAQwC//xAAWEQEBAQAAAAAAAAAAAAAAAAABECH/2gAIAQMBAT8QRMY//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERMf/aAAgBAgEBPxCp4Vn/xAAdEAEAAwACAwEAAAAAAAAAAAABABEhMUFRcZGx/9oACAEBAAE/EDUB4V5N8yoswuuX7BJsaZhjBE9tlkvpzr5FawM1Z//Z","aspectRatio":1.5037593984962405,"src":"/static/06966de250635732ac9307e77723c7c4/be86c/gatsby-theme-3.jpg","srcSet":"/static/06966de250635732ac9307e77723c7c4/d59a3/gatsby-theme-3.jpg 200w,\n/static/06966de250635732ac9307e77723c7c4/deb97/gatsby-theme-3.jpg 400w,\n/static/06966de250635732ac9307e77723c7c4/be86c/gatsby-theme-3.jpg 800w,\n/static/06966de250635732ac9307e77723c7c4/cb254/gatsby-theme-3.jpg 1200w,\n/static/06966de250635732ac9307e77723c7c4/ec36a/gatsby-theme-3.jpg 1600w,\n/static/06966de250635732ac9307e77723c7c4/a7933/gatsby-theme-3.jpg 2000w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},{"node":{"id":"fffd003b-8c88-5b75-8770-39a0577906e4","html":"<h2>Designing and configuring our Layout</h2>\n<p>This is part two in a multi-part tutorial series on building your own Gatsby theme from scratch.</p>\n<p>Please checkout the <a href=\"https://billyjacoby.dev/intro-to-gatsby-themes\">Introduction</a> and <a href=\"https://billyjacoby.dev/building-a-gatsbyjs-theme-part-one\">Part One</a> of this series if you haven't yet, as we will be picking up right where we left off at the end of part one.</p>\n<p>The finished code for this portion of the tutorial can be found on my github repo <a href=\"https://github.com/billyjacoby/gabsty-theme-tutorial/tree/part-two\">here.</a></p>\n<p>Here's what we'll be tackling in this part of the tutorial:</p>\n<ul>\n<li>Create a layout component</li>\n<li>Enable our Layout component to work across all pages</li>\n<li>Create a Header component that gets site metadata</li>\n<li>Put our Header in our Layout component to be shown on all pages</li>\n</ul>\n<h3>Create a layout component</h3>\n<p>So the first step in styling our theme is going to be building a main Layout component. We'll do this the same way you would build any other Layout component in Gatsby. We'll be building our styles in their own folders and importing them into our components. You can do the same, or use CSS in JS as well.</p>\n<p>In your theme directory create a file named <code>layout.js</code> in a <code>gatsby-theme-tutorial/src/components/</code> directory.</p>\n<p>Layout components in Gatsby take in a <code>{children}</code> object, build their layout around this object, and render the children passed into the Layout component. This is how you would do some basic styling in a Layout component in gatsby:</p>\n<p><strong><em>All of styles are only to show how this works, we will clean all of these up in a later tutorial</em></strong></p>\n<p><strong><code>/packages/gatsby-theme-tutorial/src/styles/layout.css</code></strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">.container {\n  margin: -8px;\n  padding: 8px;\n  background-color: tomato;\n  font-family: Verdana, Geneva, Tahoma, sans-serif;\n  width: 100%;\n}\n\nmain {\n  display: flex;\n  height: 100vh;\n  justify-content: center;\n  align-items: center;\n}</code>\n        </deckgo-highlight-code>\n<p><strong><code>/packages/gatsby-theme-tutorial/src/components/layout.js</code></strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React from &quot;react&quot;;\nimport &quot;../styles/layout.css&quot;;\n\nconst Layout = ({ children }) =&gt; {\n  return (\n    &lt;div className=&quot;container&quot;&gt;\n      &lt;main&gt;{children}&lt;/main&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default Layout;</code>\n        </deckgo-highlight-code>\n<p>Now the main difference in using a layout component in a normal Gatsby project, and a theme is that we want to make this layout available for all of the pages that may be built and not just the pages that come with our theme. To demonstrate this idea let's start by importing this layout file into our index.js file in our theme directory.</p>\n<p><strong><code>/packages/gatsby-theme-tutorial/src/pages/index.js</code></strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React from &quot;react&quot;;\nimport Layout from &quot;../components/layout&quot;;\n\nexport default () =&gt; (\n  &lt;Layout&gt;\n    &lt;h1&gt;Hello World!&lt;/h1&gt;\n  &lt;/Layout&gt;\n);</code>\n        </deckgo-highlight-code>\n<p>Now lets add an About page to our site directory.</p>\n<p><strong><code>/site/src/pages/about.js</code></strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React from &quot;react&quot;;\n\nconst AboutPage = () =&gt; {\n  return (\n    &lt;div&gt;\n      &lt;h2&gt;About page!&lt;/h2&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default AboutPage;</code>\n        </deckgo-highlight-code>\n<p>Now lets start up our development server and see how our pages look.</p>\n<p><code>yarn workspace site develop</code></p>\n<p>After we navigate to <code>localhost:8000</code> you should see that our layout has taken effect!</p>\n<p>However, if we navigate to <code>localhost:8000/about</code> you'll notice that the layout isn't rendered. This is because we haven't imported the Layout component into this page.</p>\n<h3>Configuring our Layout to work across all pages</h3>\n<p>Now its possible to add our Layout component as an export to our theme package, which would enable users to import our Layout into all of the necessary pages. But we want to build a Gatsby theme to make development as easy as possible!</p>\n<p>What we can do instead is wrap the root element of every page that gets rendered in our layout component using Gatsby's <code>wrapRootElement</code>. This will add our Layout component to every page created without having to import it into our page files.</p>\n<p>Go ahead and revert your <code>index.js</code> back to just an H1 tag.</p>\n<p><strong><code>/packages/gatsby-theme-tutorial/src/pages/index.js</code></strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React from &quot;react&quot;;\n\nexport default () =&gt; &lt;h1&gt;Hello World!&lt;/h1&gt;;</code>\n        </deckgo-highlight-code>\n<p>Next we'll create two more files in out root theme directory.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">touch packages/gatsby-theme-tutorial/gatsby-browser.js\ntouch packages/gatsby-theme-tutorial/gatsby-ssr.js</code>\n        </deckgo-highlight-code>\n<p>Though it seems a little repetitive we will need to place the same code in both of these files. The reason for this is because this code will run either on the server side, or in the browser itself and regardless of where they run we still want our root element wrapped.</p>\n<p>So both our <code>gatsby-browser.js</code> and <code>gatsby-ssr.js</code> files should contain the following code:</p>\n<p><strong><code>/packages/gatsby-theme-tutorial/gatsby-browser.js</code></strong></p>\n<p>And</p>\n<p><strong><code>/packages/gatsby-theme-tutorial/gatsby-ssr.js</code></strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React from &quot;react&quot;;\nimport Layout from &quot;./src/components/layout&quot;;\n\nexport const wrapPageElement = ({ element, props }) =&gt; {\n  // props provide same data to Layout as Page element will get\n  // including location, data, etc - you don&#39;t need to pass it\n  console.log(props);\n  return &lt;Layout {...props}&gt;{element}&lt;/Layout&gt;;\n};</code>\n        </deckgo-highlight-code>\n<p>Now if we check both our index and about pages we should see that our layouts have rendered!</p>\n<p>We can now begin building a site-wide header and navigation that will show up on every page, without having to import the layout component into each and every page.</p>\n<h3>Create a Header component that uses site metadata</h3>\n<p>Lets create a simple site header that displays the site name and a link to the home page.</p>\n<p>TO do this lets add some site information to the <code>gatsby-config.js</code> for our theme.</p>\n<p><strong><code>/packages/gatsby-theme-tutorial/gatsby-config.js</code></strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">module.exports = {\n  siteMetadata: {\n    title: `Gatsby Theme Tutorial`,\n    description: `A tutorial for building a GatsbyJS theme from scratch!`\n  },\n  plugins: [\n    {\n      resolve: `gatsby-plugin-page-creator`,\n      options: {\n        path: `${__dirname}/src/pages`\n      }\n    }\n  ]\n};</code>\n        </deckgo-highlight-code>\n<p>Now in our Header component we need to query for our site title. We'll do this using the <code>useStaticQuery</code> hook that Gatsby provides. We can then take that info and use it in our component.</p>\n<p><strong><code>/packages/gatsby-theme-tutorial/src/components/header.js</code></strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React from &quot;react&quot;;\nimport { useStaticQuery, graphql, Link } from &quot;gatsby&quot;;\n\nimport &quot;../styles/header.css&quot;;\n\nconst Header = () =&gt; {\n  const data = useStaticQuery(graphql`\n    query {\n      site {\n        siteMetadata {\n          title\n          description\n        }\n      }\n    }\n  `);\n\n  return (\n    &lt;div className=&quot;header&quot;&gt;\n      &lt;Link to=&quot;/&quot; className=&quot;no-style&quot;&gt;\n        &lt;h1 className=&quot;site-heading&quot;&gt;{data.site.siteMetadata.title}&lt;/h1&gt;\n        &lt;h4&gt;{data.site.siteMetadata.description}&lt;/h4&gt;\n      &lt;/Link&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default Header;</code>\n        </deckgo-highlight-code>\n<p><strong><code>/packages/gatsby-theme-tutorial/src/styles/header.css</code></strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">.header {\n  margin: -8px;\n  padding: 1.5rem;\n  width: 100%;\n  align-self: center;\n  text-align: center;\n  background-color: purple;\n  font-family: Arial, Helvetica, sans-serif;\n  border-bottom: solid black;\n}\n\n.site-heading {\n  font-size: 3rem;\n}\n\n.no-style {\n  color: inherit;\n  text-decoration: inherit;\n}</code>\n        </deckgo-highlight-code>\n<p>This is great! Noe we can access our site metadata from our <code>gatbsy-config.js</code> file in our header component. The real magic happens when we add and change this file in our site folder.</p>\n<p><strong><code>/site/gatsby-config.js</code></strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">module.exports = {\n  siteMetadata: {\n    title: `New Gatsby Site`,\n    description: `A website using our Gatsby theme!`\n  },\n  __experimentalThemes: [&quot;gatsby-theme-tutorial&quot;]\n};</code>\n        </deckgo-highlight-code>\n<p>And now the header will contain the data configured in our site folder instead of the theme folder!</p>\n<p>Now lets add our Header to our Layout component.</p>\n<h3>Adding our Header to our Layout</h3>\n<p>All we have to do is import our <code>header.js</code> file into our <code>layout.js</code> component and place it accordingly.</p>\n<p><strong><code>/packages/gatsby-theme-tutorial/components/layout.js</code></strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React from &quot;react&quot;;\nimport &quot;../styles/layout.css&quot;;\n\nimport Header from &quot;./header&quot;;\n\nconst Layout = ({ children }) =&gt; {\n  return (\n    &lt;div className=&quot;container&quot;&gt;\n      &lt;Header /&gt;\n      &lt;main&gt;{children}&lt;/main&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default Layout;</code>\n        </deckgo-highlight-code>\n<p>Our header will now be displayed on every page created either in the site folder or the theme folder.</p>\n<h3>Wrapping Up</h3>\n<p>Building components in our Gatsby theme allows us to build fully styled components while giving the consumers of the theme control over the content with ease.</p>\n<p>We're just scratching the surface on building this Gatsby theme, but you can already see the potential for complete customization!</p>\n<p>If something isn't working as you would expect feel free to compare your code against the code in the repo for this part of the tutorial <a href=\"https://github.com/billyjacoby/gabsty-theme-tutorial/tree/part-two\">here.</a></p>\n<p>Feel free to comment or tweet at me with any questions you might have, or with suggestions for what to cover in a future tutorial.</p>\n<h3>What's Next</h3>\n<p>In part three of this tutorial we will begin building different styles for different sections of our theme (blog, store, etc…), as well as how we can override styles and whole components from the site that is using our theme.</p>\n<p>The possibilities are endless when it comes to end-user customization with Gatsby themes. We'll also see how little boilerplate code we need to build full websites on a Gatsby theme!</p>","excerpt":"Designing and configuring our Layout This is part two in a multi-part tutorial series on building…","frontmatter":{"slug":"/blog/building-a-gatsbyjs-theme-part-two","title":"Building a GatsbyJS Theme - Part Two","date":"2019-05-25","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAMEBQb/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABq6XPCIJ//8QAGRAAAwEBAQAAAAAAAAAAAAAAAAIDAQQT/9oACAEBAAEFAuKnm1LpkhaMo1NbD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABoQAAICAwAAAAAAAAAAAAAAAAABAhARIWH/2gAIAQEABj8CkS7WmYdf/8QAGhAAAgIDAAAAAAAAAAAAAAAAAREAMRAhQf/aAAgBAQABPyEBRooGNXogdvDbQ7miibrH/9oADAMBAAIAAwAAABA0P//EABYRAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAwEBPxChf//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/EIf/xAAbEAEBAAMAAwAAAAAAAAAAAAABEQAhMRBBUf/aAAgBAQABPxAAydnorgm007pr5hzARIIIbMDamBGvH//Z","aspectRatio":1.5037593984962405,"src":"/static/5e7ad75abf49dbbf421d80625aa68c13/be86c/gatsby-theme-2.jpg","srcSet":"/static/5e7ad75abf49dbbf421d80625aa68c13/d59a3/gatsby-theme-2.jpg 200w,\n/static/5e7ad75abf49dbbf421d80625aa68c13/deb97/gatsby-theme-2.jpg 400w,\n/static/5e7ad75abf49dbbf421d80625aa68c13/be86c/gatsby-theme-2.jpg 800w,\n/static/5e7ad75abf49dbbf421d80625aa68c13/cb254/gatsby-theme-2.jpg 1200w,\n/static/5e7ad75abf49dbbf421d80625aa68c13/ec36a/gatsby-theme-2.jpg 1600w,\n/static/5e7ad75abf49dbbf421d80625aa68c13/a7933/gatsby-theme-2.jpg 2000w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},{"node":{"id":"0d4e10b8-ec1c-5aa9-977e-75df03d9003c","html":"<h2>Setting up our theme development environment</h2>\n<p>Welcome to part one of the tutorial. If you don't know what Gatsby themes are, or why you would use them, you can refer to part one of this tutorial<a href=\"https://billyjacoby.dev/intro-to-gatsby-themes\">here.</a></p>\n<p>This tutorial is aimed for developers who either want to create themes to release to other users, or want to create themes that they could use across a number of their own projects.</p>\n<p>You can view the final code for this part of the tutorial on my github page here:</p>\n<p><a href=\"https://github.com/billyjacoby/gabsty-theme-tutorial/tree/part-one\">Gatsby Theme - Part One</a></p>\n<p>That being said, here are a few things that we will have to tackle in this part of the tutorial to get our dev environment for building themes up and running:</p>\n<ul>\n<li>Initialize an 'umbrella' NPM package to contain both our theme package, as well as our development site</li>\n<li>Initialize an NPM package that will contain all of our theme files and configurations</li>\n<li>Initialize an NPM package that will act as a user site consuming our theme</li>\n</ul>\n<p>Now bear with me, because when I first started building this theme this all seemed a little daunting, and repetitive to me.</p>\n<p>For development purposes we will be initially building the NPM packages as private. This is so that we can use <code>yarn</code>'s workspaces feature.</p>\n<h3>NPM Init (Thrice)</h3>\n<p>Okay so the first thing we'll do is make a directory that holds our entire theme development environment, and <code>cd</code> into the directory.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">mkdir gatsby-theme-tutorial-development\ncd gatsby-theme-tutorial-development</code>\n        </deckgo-highlight-code>\n<p>Once in this folder we'll run <code>npm init</code> for the first time. You don't need to worry about filling in the information that NPM asks you for just now. If you hit enter all the way through you should have a <code>package.json</code> file that looks like this:</p>\n<p>package.json</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">{\n  &quot;name&quot;: &quot;gatsby-theme-tutorial-development&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;main&quot;: &quot;index.js&quot;,\n  &quot;scripts&quot;: {\n    &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;\n  },\n  &quot;author&quot;: &quot;&quot;,\n  &quot;license&quot;: &quot;MIT&quot;\n}</code>\n        </deckgo-highlight-code>\n<p>Now we need to make two changes to this file in order configure and allow us to use yarn's workspaces feature. Add the following lines to the bottom of your <code>package.json</code> file:</p>\n<p>/gatsby-theme-tutorial-development/package.json</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">...\n&quot;private&quot;: true,\n&quot;workspaces&quot;: [\n    &quot;site&quot;,\n    &quot;packages/*&quot;\n  ]</code>\n        </deckgo-highlight-code>\n<p>After this is complete we need to add the mentioned directories in our <code>gatsby-theme-tutorial</code> folder.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">mkdir packages\nmkdir site</code>\n        </deckgo-highlight-code>\n<p>Now we <code>cd</code> into the <code>packages/</code> folder and create the directory for our theme</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">cd packages\nmkdir gatsby-theme-tutorial</code>\n        </deckgo-highlight-code>\n<p>Our folder structure will look like this so far:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">gatsby-theme-tutorial-development/\n--packages/\n  |--gatsby-theme-tutorial/\n--site/\n--package.json</code>\n        </deckgo-highlight-code>\n<p>Now run the <code>npm init</code> command again in the <code>gatsby-theme-tutorial</code> folder, as well as the <code>site</code> folder. We can just hit enter through all of the prompts and worry about filling the information in later. This will make our directory structure look like this:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">gatsby-theme-tutorial-development/\n--packages/\n  |--gatsby-theme-tutorial/\n    |--package.json\n--site/\n  |--package.json\n--package.json</code>\n        </deckgo-highlight-code>\n<p>Okay, now that all of that is out of the way we can begin installing the necessary dependencies for our theme. We'll be doing all of this from the main directory of our development environment, in this tutorial it will be <code>/gatsby-theme-tutorial-development</code>.</p>\n<p>From this directory add the necessary dependencies to our theme workspace for Gatsby.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">yarn workspace gatsby-theme-tutorial add -D gatsby react react-dom</code>\n        </deckgo-highlight-code>\n<p>You should see a <code>node_modules/</code> folder in your gatsby theme folder once this is complete.</p>\n<p>Now we need to copy our devDependencies to peerDependencies in the gatsby theme package.json file.</p>\n<p>The <code>package.json</code> file should look like this once this is complete:</p>\n<p>/gatsby-theme-tutorial-development/gatsby-theme-tutorial/package.json</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">{\n  &quot;name&quot;: &quot;gatsby-theme-tutorial&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;main&quot;: &quot;index.js&quot;,\n  &quot;scripts&quot;: {\n    &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;\n  },\n  &quot;author&quot;: &quot;&quot;,\n  &quot;license&quot;: &quot;MIT&quot;,\n  &quot;devDependencies&quot;: {\n    &quot;gatsby&quot;: &quot;^2.4.2&quot;,\n    &quot;react&quot;: &quot;^16.8.6&quot;,\n    &quot;react-dom&quot;: &quot;^16.8.6&quot;\n  },\n  &quot;peerDependencies&quot;: {\n    &quot;gatsby&quot;: &quot;^2.4.2&quot;,\n    &quot;react&quot;: &quot;^16.8.6&quot;,\n    &quot;react-dom&quot;: &quot;^16.8.6&quot;\n  }\n}</code>\n        </deckgo-highlight-code>\n<p>Next we need to add our theme package, and our gatsby scripts to our site's package.json file. We will add this like so:</p>\n<p>/gatsby-theme-tutorial-development/site/package.json</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">{\n  &quot;name&quot;: &quot;site&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;main&quot;: &quot;index.js&quot;,\n  &quot;scripts&quot;: {\n    /// NEW LINES\n    &quot;develop&quot;: &quot;gatsby develop&quot;,\n    &quot;build&quot;: &quot;gatsby build&quot;\n  },\n  &quot;author&quot;: &quot;&quot;,\n  &quot;license&quot;: &quot;MIT&quot;,\n  /// NEW LINES\n  &quot;dependencies&quot;: {\n    &quot;gatsby-theme-tutorial&quot;: &quot;*&quot;\n  }\n}</code>\n        </deckgo-highlight-code>\n<p>The last thing we should need to do here is add our Gatsby and React dependencies to our site workspace.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">yarn workspace site add gatsby react react-dom</code>\n        </deckgo-highlight-code>\n<p>The final <code>package.json</code> for our <code>site</code> directory should look like this now:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">{\n  &quot;name&quot;: &quot;site&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;main&quot;: &quot;index.js&quot;,\n  &quot;scripts&quot;: {\n    &quot;develop&quot;: &quot;gatsby develop&quot;,\n    &quot;build&quot;: &quot;gatsby build&quot;\n  },\n  &quot;author&quot;: &quot;&quot;,\n  &quot;license&quot;: &quot;MIT&quot;,\n  &quot;dependencies&quot;: {\n    &quot;gatsby&quot;: &quot;^2.4.2&quot;,\n    &quot;gatsby-theme-tutorial&quot;: &quot;*&quot;,\n    &quot;react&quot;: &quot;^16.8.6&quot;,\n    &quot;react-dom&quot;: &quot;^16.8.6&quot;\n  }\n}</code>\n        </deckgo-highlight-code>\n<p>Okay, take a deep breath and know that all of our boilerplate folder configuration is finally complete!</p>\n<p>Next we just have to configure our <code>gatsby-config.js</code> files in order to be ready to start building!</p>\n<p>We need to install <code>gatsby-plugin-page-creator</code> into our theme. To do this run the following command.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">yarn workspace gatsby-theme-tutorial add gatsby-plugin-page-creator</code>\n        </deckgo-highlight-code>\n<p>In our <code>gatsby-theme-tutorial</code> folder create a <code>gatsby-config.js</code> file that looks like this:</p>\n<p><code>gatsby-theme-tutorial/gatsby-config.js</code></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">module.exports = {\n  plugins: [\n    {\n      resolve: `gatsby-plugin-page-creator`,\n      options: {\n        path: `${__dirname}/src/pages`\n      }\n    }\n  ]\n};</code>\n        </deckgo-highlight-code>\n<p>We also need to add an <code>index.js</code> file into this folder so that our site recognizes this folder as an NPM package. This file doesn't need to contain anything except for a comment for now.</p>\n<p><code>gatsby-theme-tutorial/index.js</code></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">// no-op</code>\n        </deckgo-highlight-code>\n<p>And in out <code>site</code> folder we need to create a super simple config file that tells our site to use our new theme!</p>\n<p><code>site/gatsby-config.js</code></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">module.exports = {\n  __experimentalThemes: [&quot;gatsby-theme-tutorial&quot;]\n};</code>\n        </deckgo-highlight-code>\n<p>Now lets create a basic index page in our theme folder and see if everything is working as expected.</p>\n<p><code>gatsby-theme-tutorial/src/pages/index.js</code></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React from &#39;react&#39;;\n\nexport default () =&gt; (\n  &lt;h1&gt;Hello World!&lt;/h1&gt;\n);</code>\n        </deckgo-highlight-code>\n<p>Now to check our work…</p>\n<p>Run <code>yarn</code> one last time, from our <code>gatsby-theme-tutorial/</code> directory to make sure all of our packages are correctly installed.</p>\n<p>Then run <code>yarn workspace site develop</code> and you will hopefully see our index page in a web browser!</p>\n<h3>The Result</h3>\n<p>Now if you're anything like me, you're probably thinking something along the lines of \"Wow we needed to do all of that work just to setup an index page?\"</p>\n<p>The magic of Gatsby themes is that we can create all of our boilerplate pages and styles inside of our theme package, and any gatsby build that will be using this theme will have access to those files!</p>\n<p>Furthermore, if we need to update a component or some styles we can do so in our theme then push the update to NPM and any other project using that theme simply has to update our theme package in order to see those updates!</p>\n<p>If something isn't working as you would expect, remember that you can view all of the source code on the part-one branch on my Github repo for this project which can be found <a href=\"https://github.com/billyjacoby/gabsty-theme-tutorial/tree/part-one\">here.</a></p>\n<p>If you get stumped feel free to comment on this post, or message me on twitter!</p>\n<h3>What's next</h3>\n<p>In part two of this tutorial we will begin diving into how we can style the layout component of our theme, and see all of those changes propagate to our development site that is using our theme.</p>\n<p>It's going to get very interesting from here on out, so stay tuned and tweet at me or leave a comment if you get hung up on anything or have any questions!</p>\n<p><strong><em>You can view <a href=\"https://billyjacoby.dev/building-a-gatsbyjs-theme-part-two\">part two of the tutorial here</a></em></strong></p>","excerpt":"Setting up our theme development environment Welcome to part one of the tutorial. If you don't know…","frontmatter":{"slug":"/blog/building-a-gatsbyjs-theme-part-one-one","title":"Building a GatsbyJS Theme - Part One","date":"2019-05-12","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGQAAAwADAAAAAAAAAAAAAAAAAAEDAgQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQME/9oADAMBAAIQAxAAAAHk7DnpzzGUZVllJQgf/8QAHRABAAEDBQAAAAAAAAAAAAAAAQIAEiEQETEyQf/aAAgBAQABBQKpBZIyRCPZml2Wt8PPmn//xAAXEQEBAQEAAAAAAAAAAAAAAAABABAh/9oACAEDAQE/AXsTn//EABgRAQEAAwAAAAAAAAAAAAAAAAEAECFR/9oACAECAQE/Ad9lIcf/xAAbEAABBAMAAAAAAAAAAAAAAAABABASMSAhsf/aAAgBAQAGPwJAgtM11aa8v//EABsQAAMAAwEBAAAAAAAAAAAAAAABESExQVEQ/9oACAEBAAE/IU8vcXRBgbb0QCVVNz0PglKOWWF09LwtNgvh7P/aAAwDAQACAAMAAAAQA+LD/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARMf/aAAgBAwEBPxBaELWENjl//8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARMf/aAAgBAgEBPxAeTVqZzQnt/8QAHBABAAICAwEAAAAAAAAAAAAAAQARITFBUWEQ/9oACAEBAAE/EKz2awA3K10lJjPUBSC1gSuegviNDhgLox37GiWDTdb88jbqmgrqD3r1U3Cvhx8v/9k=","aspectRatio":0.8,"src":"/static/349168275ce117d7dd354f332129e556/be86c/gatsby-theme-1.jpg","srcSet":"/static/349168275ce117d7dd354f332129e556/d59a3/gatsby-theme-1.jpg 200w,\n/static/349168275ce117d7dd354f332129e556/deb97/gatsby-theme-1.jpg 400w,\n/static/349168275ce117d7dd354f332129e556/be86c/gatsby-theme-1.jpg 800w,\n/static/349168275ce117d7dd354f332129e556/cb254/gatsby-theme-1.jpg 1200w,\n/static/349168275ce117d7dd354f332129e556/ec36a/gatsby-theme-1.jpg 1600w,\n/static/349168275ce117d7dd354f332129e556/a7933/gatsby-theme-1.jpg 2000w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},{"node":{"id":"c5e71557-fa38-5181-81e0-ffe445f825b2","html":"<p>If you've been following GatsbyJS, than I'm sure you've already heard about the introduction of Gatsby themes.</p>\n<h3>Why We Need Themes</h3>\n<p>I've been building tons of sites in Gatsby lately, for both my own projects and clients. Until recently I've been using my own starter that I built to scaffold out a basic design for similar websites. This works fine, until I decide that I want to make a minor change to functionality or design across all of the sites built off of this starter.</p>\n<p>Currently the way to do this is to make these changes, then push the same changes to all of my other sites. While this isn't the end of the world, there certainly has to be a better way to do this.</p>\n<h3>Themes to the Rescue</h3>\n<p>Gatsby themes claim to make this entire process easier by enabling a single update to a theme, that will be pushed to all sites built using that theme.</p>\n<p>You can read more about themes directly on the GatsbyJS.org website <a href=\"https://www.gatsbyjs.org/docs/themes/introduction/\">here</a></p>\n<p><em>Disclaimer: I have no experience with Gatsby themes yet.</em></p>\n<p>I figured having no experience with themes, that this would be a great opportunity to document my path for learning about Gatsby themes, and how to build one from the ground up.</p>\n<h3>What's to Come</h3>\n<p>I will be posting my continued attempts and (hopefully) progress building a Gatsby theme.</p>\n<p>I will link to the next parts in the tutorial as I write them for you to follow along.</p>\n<p>Feel free to reach out via the comments, twitter, or email with any questions or requests that you might have for this tutorial!</p>\n<p><strong><em>You can view <a href=\"https://billyjacoby.dev/building-a-gatsbyjs-theme-part-one\">part one of the tutorial here</a></em></strong></p>\n<p>This tutorial will be posted on both <a href=\"https://dev.to/billyjacoby\">dev.to</a> as well as my own <a href=\"https://billyjacoby.dev/blog\">blog</a>, so feel free to checkout both!</p>","excerpt":"If you've been following GatsbyJS, than I'm sure you've already heard about the introduction of…","frontmatter":{"slug":"/blog/building-a-gatsbyjs-theme-introduction","title":"Building a GatsbyJS Theme - Introduction","date":"2019-05-05","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB5mzWpIP/xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAACAwEAAAAAAAAAAAAAAAABEAAxQXH/2gAIAQEAAT8hFw8eL//aAAwDAQACAAMAAAAQaB//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAEBAAMBAAAAAAAAAAAAAAABABExUUH/2gAIAQEAAT8QWKeqR5i8Gyone7//2Q==","aspectRatio":1.5037593984962405,"src":"/static/39e6444a24819cedb254c076098d6459/be86c/gatsby-theme-intro.jpg","srcSet":"/static/39e6444a24819cedb254c076098d6459/d59a3/gatsby-theme-intro.jpg 200w,\n/static/39e6444a24819cedb254c076098d6459/deb97/gatsby-theme-intro.jpg 400w,\n/static/39e6444a24819cedb254c076098d6459/be86c/gatsby-theme-intro.jpg 800w,\n/static/39e6444a24819cedb254c076098d6459/cb254/gatsby-theme-intro.jpg 1200w,\n/static/39e6444a24819cedb254c076098d6459/ec36a/gatsby-theme-intro.jpg 1600w,\n/static/39e6444a24819cedb254c076098d6459/a7933/gatsby-theme-intro.jpg 2000w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},{"node":{"id":"7084be48-0931-5290-b1fb-984cb6b9ba2f","html":"<p>A simple demo and tutorial showing how to simply use the intersection observer API with React Hooks</p>\n<p>Here is a brief synopsis of what we will do:</p>\n<ul>\n<li>create-react-app</li>\n<li>Initial project setup</li>\n<li>intersection-observer polyfill</li>\n<li>Add elements, update CSS</li>\n<li>Write the hook</li>\n<li>Initialize the state</li>\n<li>Construct the IntersectionObserver instance</li>\n<li>Ensure to only observe the element intersecting once</li>\n<li>Show the hook in action, via the console</li>\n</ul>\n<p>If you want to see it in action checkout the demo <a href=\"https://billyjacoby.github.io/intersection-observer-hooks\">here!</a><br>\n(be sure to have the developer console open)</p>\n<p>We'll demonstrate how this works on a simple <code>create-react-app</code> skeleton.</p>\n<p>First thing we'll do is run:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">create-react-app intersection-observer-hooks\ncd intersection-observer-hooks</code>\n        </deckgo-highlight-code>\n<p>After the initialization we'll install the polyfill for the API, to ensure support for all browsers.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">yarn add intersection-observer</code>\n        </deckgo-highlight-code>\n<p>Next we'll add a few elements to our app, and tweak the CSS to enable us to see how everything works</p>\n<p><strong>App.js</strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">...\n&lt;header className=&quot;App-header&quot;&gt;\n      &lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt;\n      &lt;p&gt;\n        Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.\n      &lt;/p&gt;\n      &lt;a\n        className=&quot;App-link&quot;\n        href=&quot;https://reactjs.org&quot;\n        target=&quot;_blank&quot;\n        rel=&quot;noopener noreferrer&quot;\n      &gt;\n        Learn React\n      &lt;/a&gt;\n    &lt;/header&gt;\n&lt;div className=&quot;full-height one&quot;&gt;\n      &lt;div className=&quot;item-one&quot; /&gt;\n    &lt;/div&gt;\n    &lt;div className=&quot;full-height two&quot;&gt;\n      &lt;div className=&quot;item-two&quot; ref={elementRef}&gt;\n        {inView &amp;&amp; &lt;p&gt;I&#39;m in view!&lt;/p&gt;}\n      &lt;/div&gt;\n    &lt;/div&gt;\n    ...</code>\n        </deckgo-highlight-code>\n<p><strong>App.css</strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">... .full-height {\n  height: 100vh;\n  border: white dotted 1px;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.one {\n  background-color: #61dafb;\n  color: #282c34;\n}\n\n.two {\n  background-color: #282c34;\n  color: #61dafb;\n}\n\n.item-one {\n  background-color: #282c34;\n  color: #61dafb;\n  height: 30%;\n  width: 30%;\n}\n\n.item-two {\n  color: #282c34;\n  background-color: #61dafb;\n  height: 30%;\n  width: 30%;\n}</code>\n        </deckgo-highlight-code>\n<p>Next we will create our hook in a separate file called <code>useIntersectionObserver.js</code></p>\n<p>The first thing we'll do in this file is configure our hook to take the necessary parameters, configure out state, and output the information we'll want to see.</p>\n<p><strong>useIntersectionObserver.js</strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import { useState, useEffect } from &quot;react&quot;\n\nexport const useIntersectionObserver = (\n  ref,\n  { threshold, root, rootMargin }\n) =&gt; {\n  // configure the state\n  const [state, setState] = useState({\n    inView: false,\n    triggered: false,\n    entry: undefined,\n  })\n\n  return [state.inView, state.entry]\n}</code>\n        </deckgo-highlight-code>\n<p>This hook will take a reference to the DOM node, and the options that you would like to pass in to the IntersectionObserver object; threshold, root, and rootMargin. For more information on what these options do, you can check out the MDN docs on the API <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/IntersectionObserver\">here.</a></p>\n<p>Now we'll configure our IntersectionObserver object, and write the callback function to update our state when our DOM node's intersectionRation is greater than 0.</p>\n<p><strong>useIntersectionObserver.js</strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">...\nconst [state, setState] = useState({\n    inView: false,\n    triggered: false,\n    entry: undefined\n  });\n\n  const observer = new IntersectionObserver(\n    (entries, observerInstance) =&gt; {\n      // checks to see if the element is intersecting\n      if (entries[0].intersectionRatio &gt; 0) {\n        // if it is update the state, we set triggered as to not re-observe the element\n        setState({\n          inView: true,\n          triggered: true,\n          entry: observerInstance\n        });\n        // unobserve the element\n        observerInstance.unobserve(ref.current);\n      }\n      return;\n    },\n    {\n      threshold: threshold || 0,\n      root: root || null,\n      rootMargin: rootMargin || &quot;0%&quot;\n    }\n  );\n...</code>\n        </deckgo-highlight-code>\n<p>Next we'll use React's useEffect hook to ensure that the DOM node reference exists and also to make sure that the inView state has not already been triggered as true. This will finish up our hook, the finished result should look as follows:</p>\n<p><strong>useIntersectionObserver.js</strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import { useState, useEffect } from &quot;react&quot;\n\nexport const useIntersectionObserver = (\n  ref,\n  { threshold, root, rootMargin }\n) =&gt; {\n  // configure the state\n  const [state, setState] = useState({\n    inView: false,\n    triggered: false,\n    entry: undefined,\n  })\n\n  const observer = new IntersectionObserver(\n    (entries, observerInstance) =&gt; {\n      // checks to see if the element is intersecting\n      if (entries[0].intersectionRatio &gt; 0) {\n        // if it is update the state, we set triggered as to not re-observe the element\n        setState({\n          inView: true,\n          triggered: true,\n          entry: observerInstance,\n        })\n        // unobserve the element\n        observerInstance.unobserve(ref.current)\n      }\n      return\n    },\n    {\n      threshold: threshold || 0,\n      root: root || null,\n      rootMargin: rootMargin || &quot;0%&quot;,\n    }\n  )\n\n  useEffect(() =&gt; {\n    // check that the element exists, and has not already been triggered\n    if (ref.current &amp;&amp; !state.triggered) {\n      observer.observe(ref.current)\n    }\n  })\n\n  return [state.inView, state.entry]\n}</code>\n        </deckgo-highlight-code>\n<p>Now that we have written our hook, its time to import it into our app and see if its working.</p>\n<p><strong>App.js</strong></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">...\nimport { useIntersectionObserver } from &quot;./useIntersectionObserver&quot;;\n\nfunction App() {\n  // Create the ref to our element\n  const elementRef = useRef(null);\n  const [inView, entry] = useIntersectionObserver(elementRef, {\n    threshold: 0\n  });\n\n  // console.log our state everytime its updated to see if it works.\n  useEffect(() =&gt; {\n    console.log(inView);\n  }, [inView]);\n\n  return (\n    &lt;div className=&quot;App&quot;&gt;\n      &lt;header className=&quot;App-header&quot;&gt;\n        &lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt;\n        &lt;p&gt;\n          Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.\n        &lt;/p&gt;\n        &lt;a\n          className=&quot;App-link&quot;\n          href=&quot;https://reactjs.org&quot;\n          target=&quot;_blank&quot;\n          rel=&quot;noopener noreferrer&quot;\n        &gt;\n          Learn React\n        &lt;/a&gt;\n      &lt;/header&gt;\n      &lt;div className=&quot;full-height one&quot;&gt;\n        &lt;div className=&quot;item-one&quot; /&gt;\n      &lt;/div&gt;\n      &lt;div className=&quot;full-height two&quot;&gt;\n        &lt;div className=&quot;item-two&quot; ref={elementRef}&gt;\n          {inView &amp;&amp; &lt;p&gt;I&#39;m in view!&lt;/p&gt;}\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  );\n}\n\nexport default App;</code>\n        </deckgo-highlight-code>\n<p>Once this is all wired up, run <code>yarn start</code> and open your developer console. When the app first loads you should see that the state is first false, then when we scroll to the selected div, the state turns to true!</p>\n<p>Thanks for reading and be sure to let me know if you've enjoyed this tutorial!</p>\n<p>Shortly I'll post another that shows how to use this to animate elements onto the screen using GSAP.</p>","excerpt":"A simple demo and tutorial showing how to simply use the intersection observer API with React Hooks…","frontmatter":{"slug":"/blog/intersectionobserver-api-with-react-hooks","title":"IntersectionObserver API with React Hooks","date":"2019-04-23","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHjXmYsgT//xAAZEAEAAwEBAAAAAAAAAAAAAAABAAIDERD/2gAIAQEAAQUCpm2hgq0SdnXz/8QAFREBAQAAAAAAAAAAAAAAAAAAECH/2gAIAQMBAT8Bh//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAMBAQAAAAAAAAAAAAAAAAAQMQER/9oACAEBAAY/ArwuEVX/xAAcEAADAAEFAAAAAAAAAAAAAAAAAREhMVFhkaH/2gAIAQEAAT8hq4RuQHsMoxS0bOZ2Vn//2gAMAwEAAgADAAAAEE/P/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EBGk/8QAFhEBAQEAAAAAAAAAAAAAAAAAARBR/9oACAECAQE/EEyf/8QAHBABAAMAAgMAAAAAAAAAAAAAAQARMVFxgZGh/9oACAEBAAE/EBU0wl9jQDRYop+y7i95hiXTA8Pylmr7n//Z","aspectRatio":1.5151515151515151,"src":"/static/be3d922a9fe09c7587af1f7d8334bf80/be86c/intersection-observer.jpg","srcSet":"/static/be3d922a9fe09c7587af1f7d8334bf80/d59a3/intersection-observer.jpg 200w,\n/static/be3d922a9fe09c7587af1f7d8334bf80/deb97/intersection-observer.jpg 400w,\n/static/be3d922a9fe09c7587af1f7d8334bf80/be86c/intersection-observer.jpg 800w,\n/static/be3d922a9fe09c7587af1f7d8334bf80/cb254/intersection-observer.jpg 1200w,\n/static/be3d922a9fe09c7587af1f7d8334bf80/ec36a/intersection-observer.jpg 1600w,\n/static/be3d922a9fe09c7587af1f7d8334bf80/a7933/intersection-observer.jpg 2000w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},{"node":{"id":"33d7b821-9770-5a3a-8215-76d1a2fc7e34","html":"<p>A quick example for how to use Greensock on demand animations with react hooks</p>\n<p>This is a brief tutorial on how to animate components on demand with Greensock and React hooks.</p>\n<p>We'll be using Create react app in this tutorial.</p>\n<p>To begin create a new app:</p>\n<deckgo-highlight-code language=\"bash\" terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">create-react-app gsap-with-hooks\ncd gsap-with-hooks</code>\n        </deckgo-highlight-code>\n<p>The only other dependency we will need for this tutorial is GSAP.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">yarn add gsap</code>\n        </deckgo-highlight-code>\n<p>Start the development server so that we can see our changes</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">yarn start</code>\n        </deckgo-highlight-code>\n<p>Since we will be adding our own animations here, remove the lines that animate the React Logo from <code>src/App.css</code></p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">.App {\ntext-align: center;\n}\n\n.App-logo {\n/_ Comment out the line below _/\n/_ animation: App-logo-spin infinite 20s linear; _/\nheight: 40vmin;\npointer-events: none;\n}\n\n.App-header {\nbackground-color: #282c34;\nmin-height: 100vh;\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\njustify-content: center;\nfont-size: calc(10px + 2vmin);\ncolor: white;\n}\n\n.App-link {\ncolor: #61dafb;\n}\n/_ Commment out the code below _/\n/_ @keyframes App-logo-spin {\nfrom {\ntransform: rotate(0deg);\n}\nto {\ntransform: rotate(360deg);\n}\n} _/</code>\n        </deckgo-highlight-code>\n<p>Looking at the development server, the logo should no longer be spinning.</p>\n<p>Now we're going to add three buttons to our app that Pause, Play, and Reverse our animation. We're also going to turn the App component into a functional component.</p>\n<p>Your <code>App.js</code> should look similar to this after adding the buttons:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React from &quot;react&quot;;\nimport logo from &quot;./logo.svg&quot;;\nimport &quot;./App.css&quot;;\n\nconst App = () =&gt; {\n  return (\n    &lt;div className=&quot;App&quot;&gt;\n      &lt;header className=&quot;App-header&quot;&gt;\n        &lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt;\n        {/* Only this div and buttons have been added */}\n        &lt;div&gt;\n          &lt;button&gt;Play&lt;/button&gt;\n          &lt;button&gt;Pause&lt;/button&gt;\n          &lt;button&gt;Reverse&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;p&gt;\n          Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.\n        &lt;/p&gt;\n        &lt;a\n          className=&quot;App-link&quot;\n          href=&quot;https://reactjs.org&quot;\n          target=&quot;_blank&quot;\n          rel=&quot;noopener noreferrer&quot;\n        &gt;\n          Learn React\n        &lt;/a&gt;\n      &lt;/header&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default App;</code>\n        </deckgo-highlight-code>\n<p>Okay, now for the real work. In order to accomplish this correctly only using a functional component we will need to import useState, useRef, and useEffect from react.</p>\n<p>Replace the <code>import React from \"react\";</code> line with:</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React, {useState, useRef, useEffect} from &quot;react&quot;;</code>\n        </deckgo-highlight-code>\n<p>The first thing we'll do is create a new ref and store the react img logo in it. This will ensure that this node is loaded on the DOM before we try to animate it with Greensock.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">// new\nimport React, { useState, useRef, useEffect } from &quot;react&quot;;\nimport logo from &quot;./logo.svg&quot;;\nimport &quot;./App.css&quot;;\n\nconst App = () =&gt; {\n  // new\n  let imgRef = useRef(null);\n\n  return (\n    &lt;div className=&quot;App&quot;&gt;\n      &lt;header className=&quot;App-header&quot;&gt;\n        &lt;img\n          src={logo}\n          className=&quot;App-logo&quot;\n          alt=&quot;logo&quot;\n          // new\n          ref={element =&gt; {\n            imgRef = element;\n          }}\n        /&gt;\n        &lt;div&gt;\n          &lt;button&gt;Play&lt;/button&gt;\n          &lt;button&gt;Pause&lt;/button&gt;\n          &lt;button&gt;Reverse&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;p&gt;\n          Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.\n        &lt;/p&gt;\n        &lt;a\n          className=&quot;App-link&quot;\n          href=&quot;https://reactjs.org&quot;\n          target=&quot;_blank&quot;\n          rel=&quot;noopener noreferrer&quot;\n        &gt;\n          Learn React\n        &lt;/a&gt;\n      &lt;/header&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default App;</code>\n        </deckgo-highlight-code>\n<p>The next thing we'll do is create a react state object to store our animation function in. This will ensure that we are always accessing the already existing animation function as opposed to creating a new one.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React, { useState, useRef, useEffect } from &quot;react&quot;;\nimport logo from &quot;./logo.svg&quot;;\nimport &quot;./App.css&quot;;\n\nconst App = () =&gt; {\n\n  let imgRef = useRef(null);\n\n  // New\n  const [animation, setAnimation] = useState();\n\n  return (\n    &lt;div className=&quot;App&quot;&gt;\n      &lt;header className=&quot;App-header&quot;&gt;\n        &lt;img\n          src={logo}\n          className=&quot;App-logo&quot;\n          alt=&quot;logo&quot;\n          ref={element =&gt; {\n            imgRef = element;\n          }}\n        /&gt;\n        &lt;div&gt;\n          &lt;button&gt;Play&lt;/button&gt;\n          &lt;button&gt;Pause&lt;/button&gt;\n          &lt;button&gt;Reverse&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;p&gt;\n          Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.\n        &lt;/p&gt;\n        &lt;a\n          className=&quot;App-link&quot;\n          href=&quot;https://reactjs.org&quot;\n          target=&quot;_blank&quot;\n          rel=&quot;noopener noreferrer&quot;\n        &gt;\n          Learn React\n        &lt;/a&gt;\n      &lt;/header&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default App;</code>\n        </deckgo-highlight-code>\n<p>Next we have to use the useEffect hook to make sure that the animation is only created once the DOM has been rendered. We will create our animation function here and store it in our state object.</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React, { useState, useRef, useEffect } from &quot;react&quot;;\nimport { TweenMax } from &quot;gsap&quot;;\nimport logo from &quot;./logo.svg&quot;;\nimport &quot;./App.css&quot;;\n\nconst App = () =&gt; {\n\n  let imgRef = useRef(null);\n\n  const [animation, setAnimation] = useState(null);\n\n  // New\n  useEffect(() =&gt; {\n    setAnimation(\n      TweenMax.to(imgRef, 10, {\n        rotation: 360,\n        repeat: -1\n      }).pause()\n    );\n  }, []);\n\n  return (\n    &lt;div className=&quot;App&quot;&gt;\n      &lt;header className=&quot;App-header&quot;&gt;\n        &lt;img\n          src={logo}\n          className=&quot;App-logo&quot;\n          alt=&quot;logo&quot;\n          ref={element =&gt; {\n            imgRef = element;\n          }}\n        /&gt;\n        &lt;div&gt;\n          &lt;button&gt;Play&lt;/button&gt;\n          &lt;button&gt;Pause&lt;/button&gt;\n          &lt;button&gt;Reverse&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;p&gt;\n          Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.\n        &lt;/p&gt;\n        &lt;a\n          className=&quot;App-link&quot;\n          href=&quot;https://reactjs.org&quot;\n          target=&quot;_blank&quot;\n          rel=&quot;noopener noreferrer&quot;\n        &gt;\n          Learn React\n        &lt;/a&gt;\n      &lt;/header&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default App;</code>\n        </deckgo-highlight-code>\n<p>Since we don't want our animation to play as soon as it's loaded, we throw the <code>.pause()</code> method on the end of it. This will enable us to control when it starts rather than just starting on loading.</p>\n<p>The last thing to do is to wire up our buttons to do their jobs!</p>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"synthwave\"  >\n          <code slot=\"code\">import React, { useState, useRef, useEffect } from &quot;react&quot;;\nimport { TweenMax } from &quot;gsap&quot;;\nimport logo from &quot;./logo.svg&quot;;\nimport &quot;./App.css&quot;;\n\nconst App = () =&gt; {\n  let imgRef = useRef(null);\n\n  const [animation, setAnimation] = useState(null);\n\n  useEffect(() =&gt; {\n    setAnimation(\n      TweenMax.to(imgRef, 10, {\n        rotation: 360,\n        repeat: -1\n      }).pause()\n    );\n  }, []);\n\n  return (\n    &lt;div className=&quot;App&quot;&gt;\n      &lt;header className=&quot;App-header&quot;&gt;\n        &lt;img\n          src={logo}\n          className=&quot;App-logo&quot;\n          alt=&quot;logo&quot;\n          ref={element =&gt; {\n            imgRef = element;\n          }}\n        /&gt;\n        &lt;div&gt;\n          // New - just add the onclick handlers!\n          &lt;button onClick={() =&gt; animation.play()}&gt;Play&lt;/button&gt;\n          &lt;button onClick={() =&gt; animation.pause()}&gt;Pause&lt;/button&gt;\n          &lt;button onClick={() =&gt; animation.reverse()}&gt;Reverse&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;p&gt;\n          Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.\n        &lt;/p&gt;\n        &lt;a\n          className=&quot;App-link&quot;\n          href=&quot;https://reactjs.org&quot;\n          target=&quot;_blank&quot;\n          rel=&quot;noopener noreferrer&quot;\n        &gt;\n          Learn React\n        &lt;/a&gt;\n      &lt;/header&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default App;</code>\n        </deckgo-highlight-code>\n<p>Note that the reverse method basically rewinds the animation, so it will only work if the animation has been running for a few seconds.</p>","excerpt":"A quick example for how to use Greensock on demand animations with react hooks This is a brief…","frontmatter":{"slug":"/blog/gasp-with-react","title":"Greensock Animations using React Hooks","date":"2019-04-20","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABx3UISQV//8QAGhAAAgIDAAAAAAAAAAAAAAAAAAECIRAiQv/aAAgBAQABBQLp2UTW2P/EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/AWf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAVEAEBAAAAAAAAAAAAAAAAAAAQgf/aAAgBAQAGPwJj/8QAHBAAAgICAwAAAAAAAAAAAAAAAAERITFBcZGh/9oACAEBAAE/IW5Z8M2wux2x6IVBNQ8DP//aAAwDAQACAAMAAAAQnA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/EB//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxAn/8QAHBABAAMAAgMAAAAAAAAAAAAAAQARITFRYYGh/9oACAEBAAE/EGwrdITZXzFC36gGGht9jU2PQaucp//Z","aspectRatio":1.492537313432836,"src":"/static/7fb97a8a5daefe0d0f389f6a55dfe778/be86c/greensock-animations.jpg","srcSet":"/static/7fb97a8a5daefe0d0f389f6a55dfe778/d59a3/greensock-animations.jpg 200w,\n/static/7fb97a8a5daefe0d0f389f6a55dfe778/deb97/greensock-animations.jpg 400w,\n/static/7fb97a8a5daefe0d0f389f6a55dfe778/be86c/greensock-animations.jpg 800w,\n/static/7fb97a8a5daefe0d0f389f6a55dfe778/cb254/greensock-animations.jpg 1200w,\n/static/7fb97a8a5daefe0d0f389f6a55dfe778/ec36a/greensock-animations.jpg 1600w,\n/static/7fb97a8a5daefe0d0f389f6a55dfe778/a7933/greensock-animations.jpg 2000w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}}]}},"pageContext":{}},"staticQueryHashes":[]}